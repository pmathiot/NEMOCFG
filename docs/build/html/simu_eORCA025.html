

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>eORCA025 simulations &mdash; NEMO@IGE  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Useful tools" href="tools_nemo.html" />
    <link rel="prev" title="Input files for eORCA025 configurations" href="input_eORCA025.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> NEMO@IGE
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Input files</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="input_DATA.html">Original data set</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_eORCA12.html">Input files for eORCA12 configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_eORCA025.html">Input files for eORCA025 configurations</a></li>
</ul>
<p class="caption"><span class="caption-text">NEMO simulations</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">eORCA025 simulations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#eorca025-l121-opm00">eORCA025.L121-OPM00</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namelist">Namelist</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#namelist-oce">namelist_oce</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#nam-vvl">nam_vvl</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namtsd">namtsd</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namsbc">namsbc</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namsbc-blk">namsbc_blk</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namsbc-ssr">namsbc_ssr</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namsbc-rnf">namsbc_rnf</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#namisf">namisf</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namlbc">namlbc</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namdrg">namdrg</a></li>
<li class="toctree-l5"><a class="reference internal" href="#nambbc">nambbc</a></li>
<li class="toctree-l5"><a class="reference internal" href="#nambbl">nambbl</a></li>
<li class="toctree-l5"><a class="reference internal" href="#nameos">nameos</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namtra">namtra</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namtra-dmp">namtra_dmp</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namtra-qsr">namtra_qsr</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namtra-adv">namtra_adv</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namtra-ldf">namtra_ldf</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#namdyn">namdyn</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-adv">namdyn_adv</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-vor">namdyn_vor</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-ldf">namdyn_ldf</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-spg">namdyn_spg</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-hpg">namdyn_hpg</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#namzdf">namzdf</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namzdf-tke">namzdf_tke</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namzdf-iwm">namzdf_iwm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#namelist-ice">namelist_ice</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#nampar">nampar</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namitd">namitd</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id1">namdyn</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-rdgrft">namdyn_rdgrft</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namdyn-rhg">namdyn_rhg</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id2">namdyn_adv</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#id3">namsbc</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namthd">namthd</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#namthd-zdf">namthd_zdf</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namthd-da">namthd_da</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namthd-do">namthd_do</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namthd-sal">namthd_sal</a></li>
<li class="toctree-l6"><a class="reference internal" href="#namthd-pnd">namthd_pnd</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#namini">namini</a></li>
<li class="toctree-l5"><a class="reference internal" href="#namalb">namalb</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#input-files">Input files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#domain-cfg">domain_cfg</a></li>
<li class="toctree-l4"><a class="reference internal" href="#atmospheric-forcing">atmospheric forcing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#runoff">runoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iceberg-calving">iceberg calving</a></li>
<li class="toctree-l4"><a class="reference internal" href="#top-tidal-velocity">top tidal velocity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geothermal-heat-flux">geothermal heat flux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#internal-wave-mixing">internal wave mixing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chlorophyl">chlorophyl</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intial-condition">intial condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sea-surface-salinity">sea surface salinity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#distance-to-coast">distance to coast</a></li>
<li class="toctree-l4"><a class="reference internal" href="#slip-condition">slip condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enhance-bottom-friction">enhance bottom friction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#indonesian-through-flow">Indonesian Through Flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#xios">XIOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compilation">Compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#base">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">drakkar layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iceberg-changes">iceberg changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ice-shelf-changes">ice shelf changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#outputs">Outputs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generalities">Generalities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ocean">Ocean</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ice">Ice</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nemo-performance">NEMO Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selected-decomposition">Selected decomposition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xios-performance">XIOS performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cost">Cost</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#computer-time">Computer time</a></li>
<li class="toctree-l5"><a class="reference internal" href="#data-output">Data output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#monitoring">Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evaluation">Evaluation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tools_nemo.html">Useful tools</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NEMO@IGE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>eORCA025 simulations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/simu_eORCA025.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="eorca025-simulations">
<h1>eORCA025 simulations<a class="headerlink" href="#eorca025-simulations" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#eorca025-l121-opm00" id="id8">eORCA025.L121-OPM00</a></p>
<ul>
<li><p><a class="reference internal" href="#summary" id="id9">Summary</a></p></li>
<li><p><a class="reference internal" href="#namelist" id="id10">Namelist</a></p>
<ul>
<li><p><a class="reference internal" href="#namelist-oce" id="id11">namelist_oce</a></p>
<ul>
<li><p><a class="reference internal" href="#nam-vvl" id="id12">nam_vvl</a></p></li>
<li><p><a class="reference internal" href="#namtsd" id="id13">namtsd</a></p></li>
<li><p><a class="reference internal" href="#namsbc" id="id14">namsbc</a></p>
<ul>
<li><p><a class="reference internal" href="#namsbc-blk" id="id15">namsbc_blk</a></p></li>
<li><p><a class="reference internal" href="#namsbc-ssr" id="id16">namsbc_ssr</a></p></li>
<li><p><a class="reference internal" href="#namsbc-rnf" id="id17">namsbc_rnf</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#namisf" id="id18">namisf</a></p></li>
<li><p><a class="reference internal" href="#namlbc" id="id19">namlbc</a></p></li>
<li><p><a class="reference internal" href="#namdrg" id="id20">namdrg</a></p></li>
<li><p><a class="reference internal" href="#nambbc" id="id21">nambbc</a></p></li>
<li><p><a class="reference internal" href="#nambbl" id="id22">nambbl</a></p></li>
<li><p><a class="reference internal" href="#nameos" id="id23">nameos</a></p></li>
<li><p><a class="reference internal" href="#namtra" id="id24">namtra</a></p>
<ul>
<li><p><a class="reference internal" href="#namtra-dmp" id="id25">namtra_dmp</a></p></li>
<li><p><a class="reference internal" href="#namtra-qsr" id="id26">namtra_qsr</a></p></li>
<li><p><a class="reference internal" href="#namtra-adv" id="id27">namtra_adv</a></p></li>
<li><p><a class="reference internal" href="#namtra-ldf" id="id28">namtra_ldf</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#namdyn" id="id29">namdyn</a></p>
<ul>
<li><p><a class="reference internal" href="#namdyn-adv" id="id30">namdyn_adv</a></p></li>
<li><p><a class="reference internal" href="#namdyn-vor" id="id31">namdyn_vor</a></p></li>
<li><p><a class="reference internal" href="#namdyn-ldf" id="id32">namdyn_ldf</a></p></li>
<li><p><a class="reference internal" href="#namdyn-spg" id="id33">namdyn_spg</a></p></li>
<li><p><a class="reference internal" href="#namdyn-hpg" id="id34">namdyn_hpg</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#namzdf" id="id35">namzdf</a></p>
<ul>
<li><p><a class="reference internal" href="#namzdf-tke" id="id36">namzdf_tke</a></p></li>
<li><p><a class="reference internal" href="#namzdf-iwm" id="id37">namzdf_iwm</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#namelist-ice" id="id38">namelist_ice</a></p>
<ul>
<li><p><a class="reference internal" href="#nampar" id="id39">nampar</a></p></li>
<li><p><a class="reference internal" href="#namitd" id="id40">namitd</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id41">namdyn</a></p>
<ul>
<li><p><a class="reference internal" href="#namdyn-rdgrft" id="id42">namdyn_rdgrft</a></p></li>
<li><p><a class="reference internal" href="#namdyn-rhg" id="id43">namdyn_rhg</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id44">namdyn_adv</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id3" id="id45">namsbc</a></p></li>
<li><p><a class="reference internal" href="#namthd" id="id46">namthd</a></p>
<ul>
<li><p><a class="reference internal" href="#namthd-zdf" id="id47">namthd_zdf</a></p></li>
<li><p><a class="reference internal" href="#namthd-da" id="id48">namthd_da</a></p></li>
<li><p><a class="reference internal" href="#namthd-do" id="id49">namthd_do</a></p></li>
<li><p><a class="reference internal" href="#namthd-sal" id="id50">namthd_sal</a></p></li>
<li><p><a class="reference internal" href="#namthd-pnd" id="id51">namthd_pnd</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#namini" id="id52">namini</a></p></li>
<li><p><a class="reference internal" href="#namalb" id="id53">namalb</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#input-files" id="id54">Input files</a></p>
<ul>
<li><p><a class="reference internal" href="#domain-cfg" id="id55">domain_cfg</a></p></li>
<li><p><a class="reference internal" href="#atmospheric-forcing" id="id56">atmospheric forcing</a></p></li>
<li><p><a class="reference internal" href="#runoff" id="id57">runoff</a></p></li>
<li><p><a class="reference internal" href="#iceberg-calving" id="id58">iceberg calving</a></p></li>
<li><p><a class="reference internal" href="#top-tidal-velocity" id="id59">top tidal velocity</a></p></li>
<li><p><a class="reference internal" href="#geothermal-heat-flux" id="id60">geothermal heat flux</a></p></li>
<li><p><a class="reference internal" href="#internal-wave-mixing" id="id61">internal wave mixing</a></p></li>
<li><p><a class="reference internal" href="#chlorophyl" id="id62">chlorophyl</a></p></li>
<li><p><a class="reference internal" href="#intial-condition" id="id63">intial condition</a></p></li>
<li><p><a class="reference internal" href="#sea-surface-salinity" id="id64">sea surface salinity</a></p></li>
<li><p><a class="reference internal" href="#distance-to-coast" id="id65">distance to coast</a></p></li>
<li><p><a class="reference internal" href="#slip-condition" id="id66">slip condition</a></p></li>
<li><p><a class="reference internal" href="#enhance-bottom-friction" id="id67">enhance bottom friction</a></p></li>
<li><p><a class="reference internal" href="#indonesian-through-flow" id="id68">Indonesian Through Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#code" id="id69">Code</a></p>
<ul>
<li><p><a class="reference internal" href="#xios" id="id70">XIOS</a></p></li>
<li><p><a class="reference internal" href="#compilation" id="id71">Compilation</a></p></li>
<li><p><a class="reference internal" href="#base" id="id72">base</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id73">drakkar layer</a></p></li>
<li><p><a class="reference internal" href="#iceberg-changes" id="id74">iceberg changes</a></p></li>
<li><p><a class="reference internal" href="#ice-shelf-changes" id="id75">ice shelf changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#outputs" id="id76">Outputs</a></p>
<ul>
<li><p><a class="reference internal" href="#generalities" id="id77">Generalities</a></p></li>
<li><p><a class="reference internal" href="#ocean" id="id78">Ocean</a></p></li>
<li><p><a class="reference internal" href="#ice" id="id79">Ice</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance" id="id80">Performance</a></p>
<ul>
<li><p><a class="reference internal" href="#nemo-performance" id="id81">NEMO Performance</a></p></li>
<li><p><a class="reference internal" href="#selected-decomposition" id="id82">Selected decomposition</a></p></li>
<li><p><a class="reference internal" href="#xios-performance" id="id83">XIOS performance</a></p></li>
<li><p><a class="reference internal" href="#cost" id="id84">Cost</a></p>
<ul>
<li><p><a class="reference internal" href="#computer-time" id="id85">Computer time</a></p></li>
<li><p><a class="reference internal" href="#data-output" id="id86">Data output</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#monitoring" id="id87">Monitoring</a></p></li>
<li><p><a class="reference internal" href="#evaluation" id="id88">Evaluation</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="eorca025-l121-opm00">
<h2><a class="toc-backref" href="#id8">eORCA025.L121-OPM00</a><a class="headerlink" href="#eorca025-l121-opm00" title="Permalink to this headline">¶</a></h2>
<div class="section" id="summary">
<h3><a class="toc-backref" href="#id9">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="namelist">
<h3><a class="toc-backref" href="#id10">Namelist</a><a class="headerlink" href="#namelist" title="Permalink to this headline">¶</a></h3>
<p>Only the activated blocks are presented here:</p>
<div class="section" id="namelist-oce">
<h4><a class="toc-backref" href="#id11">namelist_oce</a><a class="headerlink" href="#namelist-oce" title="Permalink to this headline">¶</a></h4>
<div class="section" id="nam-vvl">
<h5><a class="toc-backref" href="#id12">nam_vvl</a><a class="headerlink" href="#nam-vvl" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>non linear ssh is used (ie model levels not fixed in time)</p></li>
<li><p>z* is used</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;nam_vvl       !   vertical coordinate options                          (default: z-star)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_vvl_zstar  = .true.           !  z-star vertical coordinate</span>
<span class="go">   ln_vvl_ztilde = .false.          !  z-tilde vertical coordinate: only high frequency variations</span>
<span class="go">   ln_vvl_layer  = .false.          !  full layer vertical coordinate</span>
<span class="go">   ln_vvl_ztilde_as_zstar = .false. !  ztilde vertical coordinate emulating zstar</span>
<span class="go">   ln_vvl_zstar_at_eqtor  = .false. !  ztilde near the equator</span>
<span class="go">   rn_ahe3       =  0.0             !  thickness diffusion coefficient</span>
<span class="go">   rn_rst_e3t    = 30.0             !  ztilde to zstar restoration timescale [days]</span>
<span class="go">   rn_lf_cutoff  =  5.0             !  cutoff frequency for low-pass filter  [days]</span>
<span class="go">   rn_zdef_max   =  0.9             !  maximum fractional e3t deformation</span>
<span class="go">   ln_vvl_dbg    = .false.          !  debug prints    (T/F)</span>
<span class="go">/</span>

<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdom        !   time and space domain</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_linssh   =  .false.  !  =T  linear free surface  ==&gt;&gt;  model level are fixed in time</span>
<span class="go">   !</span>
<span class="go">   rn_rdt      =   1350.   !  time step for the dynamics and tracer</span>
<span class="go">   rn_atfp     =    0.1    !  asselin time filter parameter</span>
<span class="go">   !</span>
<span class="go">   ln_crs      = .false.   !  Logical switch for coarsening module      (T =&gt; fill namcrs)</span>
<span class="go">   !</span>
<span class="go">   ln_meshmask = .true.    !  =T create a mesh file</span>
<span class="go"> /</span>
</pre></div>
</div>
</div>
<div class="section" id="namtsd">
<h5><a class="toc-backref" href="#id13">namtsd</a><a class="headerlink" href="#namtsd" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Start from rest</p></li>
<li><p>TS from WOA2018 (<a class="reference internal" href="input_eORCA025.html#eorca025-l121-woa2018-b0-2-c3-0-d1-0-v19812010-4"><span class="std std-ref">eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.4.nc</span></a>)</p></li>
<li><p>no 3d restoring</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtsd_drk    !    Temperature &amp; Salinity Data  (init/dmp)             (default: OFF)</span>
<span class="go">!              !   if key_drakkar, **only**  namtsd_drk is read</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_tsd_init   = .true.   !  Initialisation of ocean T &amp; S with T &amp;S input data (T) or not (F)</span>
<span class="go">   ln_tsd_dmp = .false.     !  damping of ocean T &amp; S toward T &amp;S input data (T) or not (F)</span>

<span class="go">   cn_dir        = &#39;./&#39;     !  root directory for the location of the temperature and salinity file</span>
<span class="go">   !___________!_____________________________________!___________________!___________!_____________!________!___________!_____________!__________!_______________!</span>
<span class="go">   !           !  file name                          ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights     ! rotation ! land/sea mask !</span>
<span class="go">   !           !                                     !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !   filename  ! pairing  !    filename   !</span>
<span class="go">   ! data used for initial condition (istate)</span>
<span class="go">   sn_tem_ini  = &#39;eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.5&#39;, -1., &#39;votemper&#39;,  .true.   , .true. , &#39;yearly&#39;  ,  &#39;&#39;         , &#39; &#39;      , &#39; &#39;</span>
<span class="go">   sn_sal_ini  = &#39;eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.5&#39;, -1., &#39;vosaline&#39;,  .true.   , .true. , &#39;yearly&#39;  ,  &#39;&#39;         , &#39; &#39;      , &#39; &#39;</span>
<span class="go">   ! data used for damping ( tradmp)</span>
<span class="go">   sn_tem_dmp  = &#39;eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.5&#39;, -1., &#39;votemper&#39;,  .true.      , .true., &#39;yearly&#39;   ,  &#39;&#39;         , &#39; &#39;      , &#39; &#39;</span>
<span class="go">   sn_sal_dmp  = &#39;eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.5&#39;, -1., &#39;vosaline&#39;,  .true.      , .true., &#39;yearly&#39;   ,  &#39;&#39;         , &#39; &#39;      , &#39; &#39;</span>
<span class="go">   !</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namsbc">
<h5><a class="toc-backref" href="#id14">namsbc</a><a class="headerlink" href="#namsbc" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>atmospheric flux are computed using a blk formulation</p></li>
<li><p>sea-ice is used</p></li>
<li><p>sea-ice is levitating for robustness (embeded sea ice is unstable in case thick sea-ice and shallow water)</p></li>
<li><p>light penetration into the ocean is activated</p></li>
<li><p>duirnal cycle set to false as atmospheric forcing is 3h output_frequency</p></li>
<li><p>We check the fresh water budget to avoid any trend in ssh and possible blow
up in shallow water due to this in case of strong unbalanced in empmr - icb - isf</p></li>
<li><p>sea surface salinity restoring module is activated</p></li>
<li><p>runoff module is activated</p></li>
<li><p>surface module is call every time step</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namsbc        !   Surface Boundary Condition manager                   (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   nn_fsbc     = 1         !  frequency of SBC module call</span>
<span class="go">      !                    !  (control sea-ice &amp; iceberg model call)</span>
<span class="go">                     ! Type of air-sea fluxes</span>
<span class="go">   ln_usr      = .false.   !  user defined formulation                  (T =&gt; check usrdef_sbc)</span>
<span class="go">   ln_flx      = .false.   !  flux formulation                          (T =&gt; fill namsbc_flx )</span>
<span class="go">   ln_blk      = .true.    !  Bulk formulation                          (T =&gt; fill namsbc_blk )</span>
<span class="go">      !              ! Type of coupling (Ocean/Ice/Atmosphere) :</span>
<span class="go">   ln_cpl      = .false.   !  atmosphere coupled   formulation          ( requires key_oasis3 )</span>
<span class="go">   ln_mixcpl   = .false.   !  forced-coupled mixed formulation          ( requires key_oasis3 )</span>
<span class="go">   nn_components = 0       !  configuration of the opa-sas OASIS coupling</span>
<span class="go">      !                    !  =0 no opa-sas OASIS coupling: default single executable config.</span>
<span class="go">      !                    !  =1 opa-sas OASIS coupling: multi executable config., OPA component</span>
<span class="go">      !                    !  =2 opa-sas OASIS coupling: multi executable config., SAS component</span>
<span class="go">                     ! Sea-ice :</span>
<span class="go">   nn_ice      = 2         !  =0 no ice boundary condition</span>
<span class="go">      !                    !  =1 use observed ice-cover                 (  =&gt; fill namsbc_iif )</span>
<span class="go">      !                    !  =2 or 3 automatically for SI3 or CICE    (&quot;key_si3&quot; or &quot;key_cice&quot;)</span>
<span class="go">      !                    !          except in AGRIF zoom where it has to be specified</span>
<span class="go">   ln_ice_embd = .false.   !  =T embedded sea-ice (pressure + mass and salt exchanges)</span>
<span class="go">      !                    !  =F levitating ice (no pressure, mass and salt exchanges)</span>
<span class="go">                     ! Misc. options of sbc :</span>
<span class="go">   ln_traqsr   = .true.    !  Light penetration in the ocean            (T =&gt; fill namtra_qsr)</span>
<span class="go">   ln_dm2dc    = .false.   !  daily mean to diurnal cycle on short wave</span>
<span class="go">   ln_ssr      = .true.    !  Sea Surface Restoring on T and/or S       (T =&gt; fill namsbc_ssr)</span>
<span class="go">   nn_fwb      = 1         !  FreshWater Budget: =0 unchecked</span>
<span class="go">      !                    !     =1 global mean of e-p-r set to zero at each time step</span>
<span class="go">      !                    !     =2 annual global mean of e-p-r set to zero</span>
<span class="go">   ln_rnf      = .true.    !  runoffs                                   (T =&gt; fill namsbc_rnf)</span>
<span class="go">   ln_apr_dyn  = .false.   !  Patm gradient added in ocean &amp; ice Eqs.   (T =&gt; fill namsbc_apr )</span>
<span class="go">   ln_wave     = .false.   !  Activate coupling with wave  (T =&gt; fill namsbc_wave)</span>
<span class="go">   ln_cdgw     = .false.   !  Neutral drag coefficient read from wave model (T =&gt; ln_wave=.true. &amp; fill namsbc_wave)</span>
<span class="go">   ln_sdw      = .false.   !  Read 2D Surf Stokes Drift &amp; Computation of 3D stokes drift (T =&gt; ln_wave=.true. &amp; fill namsbc_wave)</span>
<span class="go">   nn_sdrift   =  0        !  Parameterization for the calculation of 3D-Stokes drift from the surface Stokes drift</span>
<span class="go">      !                    !   = 0 Breivik 2015 parameterization: v_z=v_0*[exp(2*k*z)/(1-8*k*z)]</span>
<span class="go">      !                    !   = 1 Phillips:                      v_z=v_o*[exp(2*k*z)-beta*sqrt(-2*k*pi*z)*erfc(sqrt(-2*k*z))]</span>
<span class="go">      !                    !   = 2 Phillips as (1) but using the wave frequency from a wave model</span>
<span class="go">   ln_tauwoc   = .false.   !  Activate ocean stress modified by external wave induced stress (T =&gt; ln_wave=.true. &amp; fill namsbc_wave)</span>
<span class="go">   ln_tauw     = .false.   !  Activate ocean stress components from wave model</span>
<span class="go">   ln_stcor    = .false.   !  Activate Stokes Coriolis term (T =&gt; ln_wave=.true. &amp; ln_sdw=.true. &amp; fill namsbc_wave)</span>
<span class="go">   nn_lsm      = 0         !  =0 land/sea mask for input fields is not applied (keep empty land/sea mask filename field) ,</span>
<span class="go">                           !  =1:n number of iterations of land/sea mask application for input fields (fill land/sea mask filename field)</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------*</span>
</pre></div>
</div>
<div class="section" id="namsbc-blk">
<h6><a class="toc-backref" href="#id15">namsbc_blk</a><a class="headerlink" href="#namsbc-blk" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>NCAR formulation is used (as recommended in Tsujino et al. 2020)</p></li>
<li><p>JRA55 files are drowned and described <a class="reference internal" href="input_DATA.html#jra55-v1-4"><span class="std std-ref">here</span></a></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namsbc_blk    !   namsbc_blk  generic Bulk formula                     (ln_blk =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                    !  bulk algorithm :</span>
<span class="go">   ln_NCAR      = .true.    ! &quot;NCAR&quot;      algorithm   (Large and Yeager 2008)</span>
<span class="go">   ln_COARE_3p0 = .false.   ! &quot;COARE 3.0&quot; algorithm   (Fairall et al. 2003)</span>
<span class="go">   ln_COARE_3p5 = .false.   ! &quot;COARE 3.5&quot; algorithm   (Edson et al. 2013)</span>
<span class="go">   ln_ECMWF     = .false.   ! &quot;ECMWF&quot;     algorithm   (IFS cycle 31)</span>
<span class="go">      !</span>
<span class="go">      rn_zqt      =  2.       !  Air temperature &amp; humidity reference height (m)</span>
<span class="go">      rn_zu       = 10.       !  Wind vector reference height (m)</span>
<span class="go">      ln_Cd_L12   = .false.   !  air-ice drags = F(ice concentration) (Lupkes et al. 2012)</span>
<span class="go">      ln_Cd_L15   = .false.   !  air-ice drags = F(ice concentration) (Lupkes et al. 2015)</span>
<span class="go">      ln_taudif   = .false.   !  HF tau contribution: use &quot;mean of stress module - module of the mean stress&quot; data</span>
<span class="go">      rn_pfac     = 1.        !  multiplicative factor for precipitation (total &amp; snow)</span>
<span class="go">      rn_efac     = 1.        !  multiplicative factor for evaporation (0. or 1.)</span>
<span class="go">      rn_vfac     = 0.        !  multiplicative factor for ocean &amp; ice velocity used to</span>
<span class="go">      !                       !  calculate the wind stress (0.=absolute or 1.=relative winds)</span>
<span class="go">    cn_dir = &#39;./&#39;</span>
<span class="go">   !_______!__________________!___________________!___________!_____________!_________!___________!______________________________!__________!______!</span>
<span class="go">   !       !  file name       ! frequency (hours) ! variable  ! time interp.!  clim   ! &#39;yearly&#39;/ ! weights filename             ! rotation !  lsm !</span>
<span class="go">   !       !                  !  (if &lt;0  months)  !   name    !   (logical) !  (T/F)  ! &#39;monthly&#39; !                              !  paring  !      !</span>
<span class="go">   !_______!__________________!___________________!___________!_____________!_________!___________!______________________________!__________!______!</span>
<span class="go">   sn_wndi = &#39;drowned_uas_JRA55&#39;    ,  3.         ,  &#39;uas&#39;    ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bicubic.nc&#39; , &#39;U1&#39; ,   &#39;&#39;</span>
<span class="go">   sn_wndj = &#39;drowned_vas_JRA55&#39;    ,  3.         ,  &#39;vas&#39;    ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bicubic.nc&#39; , &#39;V1&#39; ,   &#39;&#39;</span>
<span class="go">   sn_qsr  = &#39;drowned_rsds_JRA55&#39;   ,  3.         ,  &#39;rsds&#39;   ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_qlw  = &#39;drowned_rlds_JRA55&#39;   ,  3.         ,  &#39;rlds&#39;   ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_tair = &#39;drowned_tas_JRA55&#39;    ,  3.         ,  &#39;tas&#39;    ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_humi = &#39;drowned_huss_JRA55&#39;   ,  3.         ,  &#39;huss&#39;   ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_prec = &#39;drowned_tprecip_JRA55&#39; , 3.         ,  &#39;tprecip&#39;,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_snow = &#39;drowned_prsn_JRA55 &#39;  ,  3.         ,  &#39;prsn&#39;   ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_slp  = &#39;drowned_psl_JRA55&#39;    ,  3.         ,  &#39;psl&#39;    ,    .true.   , .false. , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_cc   = &#39;NOT USED&#39;             , 24.         ,  &#39;CC&#39;     ,   .false.   , .false. , &#39;yearly&#39;  , &#39;&#39;                                        , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">   sn_tdif = &#39;NOT_USED&#39;             , 24.         , &#39;taudif&#39;  ,   .false.   , .true.  , &#39;yearly&#39;  , &#39;eORCA025_JRA55_do_c3.0_weights_bilin.nc&#39; , &#39;&#39;   ,   &#39;&#39;</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
</pre></div>
</div>
</div>
<div class="section" id="namsbc-ssr">
<h6><a class="toc-backref" href="#id16">namsbc_ssr</a><a class="headerlink" href="#namsbc-ssr" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>sea surface salinity restoring is caped</p></li>
<li><p>sea surface restoring is applied everywhere except in the first 150 km of the continent or large islands in order to avoid killing coastal circulation,
runoff plumes and others not represented in the climatology.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namsbc_ssr    !   surface boundary condition : sea surface restoring   (ln_ssr =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   nn_sstr     =     0     !  add a retroaction term to the surface heat flux (=1) or not (=0)</span>
<span class="go">      rn_dqdt     = -40.      !  magnitude of the retroaction on temperature   [W/m2/K]</span>
<span class="go">   nn_sssr     =     2     !  add a damping term to the surface freshwater flux (=2)</span>
<span class="go">      !                    !  or to SSS only (=1) or no damping term (=0)</span>
<span class="go">      rn_deds     =  -166.67  !  magnitude of the damping on salinity   [mm/day]</span>
<span class="go">      ln_sssr_bnd =  .true.   !  flag to bound erp term (associated with nn_sssr=2)</span>
<span class="go">      rn_sssr_bnd =   4.e0    !  ABS(Max/Min) value of the damping erp term [mm/day]</span>

<span class="go">      nn_sssr_ice =   1       ! control of sea surface restoring under sea-ice</span>
<span class="go">                              ! 0 = no restoration under ice : * (1-icefrac)</span>
<span class="go">                              ! 1 = restoration everywhere</span>
<span class="go">                              ! &gt;1 = enhanced restoration under ice : 1+(nn_icedmp-1)*icefrac</span>
<span class="go">   cn_dir      = &#39;./&#39;      !  root directory for the SST/SSS data location</span>
<span class="go">   !___________!_________________________!___________________!___________!_____________!________!___________!___________!__________!_______________!</span>
<span class="go">   !           !  file name              ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights e ! rotation ! land/sea mask !</span>
<span class="go">   !           !                         !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !  filename ! pairing  !    filename   !</span>
<span class="go">   sn_sst      = &#39;NOT_USED.nc&#39;           ,        24.        ,  &#39;sst&#39;    ,    .false.  , .false., &#39;yearly&#39;  ,    &#39;&#39;     ,    &#39;&#39;    ,     &#39;&#39;</span>
<span class="go">   sn_sss      = &#39;sss_WOA2018r04_v19812010.2.nc , -1.        ,  &#39;s_an&#39;   ,    .true.   , .true. , &#39;yearly&#39;  ,    &#39;eORCA025_sss_WOA2018r04_v19812010_c3.0_weights_bilin.nc&#39;     ,    &#39;&#39;    ,     &#39;&#39;</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namsbc_ssr_drk !   surface boundary condition : sea surface restoring   (ln_ssr =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_sssr_flt  = .false.  ! use filtering of SSS model for sss restoring</span>
<span class="go">   nn_shap_iter =  300     ! number of iteration of the shapiro filter</span>
<span class="go">   ln_sssr_msk  = .true.  ! use a mask near the coast</span>
<span class="go">   !___________!____________________!___________________!__________!_____________!________!___________!__________!__________!_______________!</span>
<span class="go">   !           !  file name         ! frequency (hours) ! variable ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights  ! rotation ! land/sea mask !</span>
<span class="go">   !           !                    !  (if &lt;0  months)  !   name   !   (logical) !  (T/F) ! &#39;monthly&#39; ! filename ! pairing  !    filename   !</span>
<span class="go">   sn_coast    = &#39;eORCA025_distcoast_b0.2_v0.0.nc&#39; , 0. , &#39;Tcoast&#39; , .false.     , .true. , &#39;yearly&#39;  ,  &#39;&#39;      , &#39;&#39;       , &#39;&#39;</span>

<span class="go">   rn_dist    =  150.      ! distance to the coast</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
</pre></div>
</div>
</div>
<div class="section" id="namsbc-rnf">
<h6><a class="toc-backref" href="#id17">namsbc_rnf</a><a class="headerlink" href="#namsbc-rnf" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>runoff is mixed in the top 10 meters by adding some additional mixing (2.e-3 m2/s)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namsbc_rnf    !   runoffs                                              (ln_rnf =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_rnf_mouth  = .true.     !  specific treatment at rivers mouths</span>
<span class="go">      rn_hrnf    =  10.e0     !  depth over which enhanced vertical mixing is used    (ln_rnf_mouth=T)</span>
<span class="go">      rn_avt_rnf =   2.e-3    !  value of the additional vertical mixing coef. [m2/s] (ln_rnf_mouth=T)</span>
<span class="go">   rn_rfact      =   1.e0     !  multiplicative factor for runoff</span>
<span class="go">   ln_rnf_depth  = .false.    !  read in depth information for runoff</span>
<span class="go">   ln_rnf_tem    = .false.    !  read in temperature information for runoff</span>
<span class="go">   ln_rnf_sal    = .false.    !  read in salinity information for runoff</span>
<span class="go">   ln_rnf_depth_ini = .false. ! compute depth at initialisation from runoff file</span>
<span class="go">      rn_rnf_max  = 5.735e-4  !  max value of the runoff climatologie over global domain ( ln_rnf_depth_ini = .true )</span>
<span class="go">      rn_dep_max  = 150.      !  depth over which runoffs is spread ( ln_rnf_depth_ini = .true )</span>
<span class="go">      nn_rnf_depth_file = 0   !  create (=1) a runoff depth file or not (=0)</span>
<span class="go">   ln_rnf_icb  = .false.   !  read in iceberg flux from a file (fill sn_i_rnf if .true.)</span>

<span class="go">   cn_dir      = &#39;./&#39;      !  root directory for the runoff data location</span>
<span class="go">   !___________!_________________________!___________________!___________!_____________!________!___________!__________________!__________!_______________!</span>
<span class="go">   !           !  file name              ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights filename ! rotation ! land/sea mask !</span>
<span class="go">   !           !                         !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !                  ! pairing  !    filename   !</span>
<span class="go">   sn_rnf      = &#39;eORCA025_runoff_b0.2_v0.0.nc&#39;,   -1.       , &#39;sorunoff&#39;,   .true.    , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_cnf      = &#39;eORCA025_runoff_b0.2_v0.0.nc&#39;,    0.       , &#39;socoefr&#39; ,   .false.   , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_s_rnf    = &#39;NOT_USED&#39;              ,        24.        , &#39;rosaline&#39;,   .true.    , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_t_rnf    = &#39;NOT_USED&#39;              ,        24.        , &#39;rotemper&#39;,   .true.    , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_dep_rnf  = &#39;NOT_USED&#39;              ,         0.        , &#39;rodepth&#39; ,   .false.   , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_i_rnf    = &#39;NOT_USED&#39;              ,        -1.        , &#39;sorunoff&#39;,   .true.    , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="namisf">
<h5><a class="toc-backref" href="#id18">namisf</a><a class="headerlink" href="#namisf" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>all cavities are opened. We do not use yet the capability to split open cavities and parametrised cavities</p></li>
<li><p>3 equation formulation as in ISOMIP+ is used</p></li>
<li><p>Stanton number used in 0.0007 as in Ute paper</p></li>
<li><p>Cd=2.5e-3 (see top friction block)</p></li>
<li><p>gamma t/gammas = 35 as in Ute paper</p></li>
<li><p>Gamma is velocity dependent with prescribed 2d top tidal velocity.</p></li>
<li><p>losch top boundary layer is set to 20m as the level distribution is design to have a ‘plateau’ at about e3t=~20m</p></li>
<li><p>ice load computed as in ISOMIP</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;namisf       !  Top boundary layer (ISF)                               (default: OFF)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !</span>
<span class="go">   ! ---------------- ice shelf load -------------------------------</span>
<span class="go">   !</span>
<span class="go">   cn_isfload = &#39;uniform&#39;      ! scheme to compute ice shelf load (ln_isfcav = .true. in domain_cfg.nc)</span>
<span class="go">      rn_isfload_T = -1.9</span>
<span class="go">      rn_isfload_S = 34.4</span>
<span class="go">   !</span>
<span class="go">   ! ---------------- ice shelf melt formulation -------------------------------</span>
<span class="go">   !</span>
<span class="go">   ln_isf = .true.            ! activate ice shelf module</span>
<span class="go">      ln_isfdebug = .false.      ! add debug print in ISF code (global min/max/sum of specific variable)</span>
<span class="go">      cn_isfdir   = &#39;./&#39;         ! directory for all ice shelf input file</span>
<span class="go">      !</span>
<span class="go">      ! ---------------- cavities opened -------------------------------</span>
<span class="go">      !</span>
<span class="go">      ln_isfcav_mlt = .true.     ! ice shelf melting into the cavity (need ln_isfcav = .true. in domain_cfg.nc)</span>
<span class="go">         cn_isfcav_mlt = &#39;3eq&#39;   ! ice shelf melting formulation (spe/2eq/3eq/oasis)</span>
<span class="go">         !                       ! spe = fwfisf is read from a forcing field</span>
<span class="go">         !                       ! 2eq = ISOMIP  like: 2 equations formulation (Hunter et al., 2006 for a short description)</span>
<span class="go">         !                       ! 3eq = ISOMIP+ like: 3 equations formulation (Asay-Davis et al., 2016 for a short description)</span>
<span class="go">         !                       ! oasis = fwfisf is given by oasis and pattern by file sn_isfcav_fwf</span>
<span class="go">         !              !  cn_isfcav_mlt = 2eq or 3eq cases:</span>
<span class="go">         cn_gammablk = &#39;vel&#39;     ! scheme to compute gammat/s (spe,ad15,hj99)</span>
<span class="go">         !                       ! spe      = constant transfert velocity (rn_gammat0, rn_gammas0)</span>
<span class="go">         !                       ! vel      = velocity dependent transfert velocity (u* * gammat/s) (Asay-Davis et al. 2016 for a short description)</span>
<span class="go">         !                       ! vel_stab = velocity and stability dependent transfert coeficient (Holland et al. 1999 for a complete description)</span>
<span class="go">         rn_gammat0  = 1.4e-2    ! gammat coefficient used in spe, vel and vel_stab gamma computation method</span>
<span class="go">         rn_gammas0  = 4.0e-4    ! gammas coefficient used in spe, vel and vel_stab gamma computation method</span>
<span class="go">         !</span>
<span class="go">         rn_htbl     =  20.      ! thickness of the top boundary layer    (Losh et al. 2008)</span>
<span class="go">         !                       ! 0 =&gt; thickness of the tbl = thickness of the first wet cell</span>
<span class="go">         !</span>
<span class="go">         !* &#39;spe&#39; and &#39;oasis&#39; case</span>
<span class="go">         !___________!_____________!___________________!___________!_____________!_________!___________!__________!__________!_______________!</span>
<span class="go">         !           !  file name  ! frequency (hours) ! variable  ! time interp.!  clim   ! &#39;yearly&#39;/ ! weights  ! rotation ! land/sea mask !</span>
<span class="go">         !           !             !  (if &lt;0  months)  !   name    !  (logical)  !  (T/F)  ! &#39;monthly&#39; ! filename ! pairing  ! filename      !</span>
<span class="go">         sn_isfcav_fwf = &#39;NOT_USED.nc&#39; ,     -12.      , &#39;fwflisf&#39;  ,  .false.    , .true.  , &#39;yearly&#39;  ,    &#39;&#39;    ,   &#39;&#39;     ,    &#39;&#39;</span>
<span class="go">      !</span>
<span class="go">      ! ---------------- cavities parametrised -------------------------------</span>
<span class="go">      !</span>
<span class="go">      ln_isfpar_mlt = .false.   ! ice shelf melting parametrised</span>
<span class="go">         cn_isfpar_mlt = &#39;spe&#39;  ! ice shelf melting parametrisation (spe/bg03/oasis)</span>
<span class="go">         !                      ! spe   = fwfisf is read from a forcing field</span>
<span class="go">         !                      ! bg03  = melt computed using Beckmann and Goosse parametrisation</span>
<span class="go">         !                      ! oasis = fwfisf is given by oasis and pattern by file sn_isfpar_fwf</span>
<span class="go">         !</span>
<span class="go">         !* all cases</span>
<span class="go">         !___________!_____________!___________________!___________!_____________!_________!___________!__________!__________!_______________!</span>
<span class="go">         !           !  file name  ! frequency (hours) ! variable  ! time interp.!  clim   ! &#39;yearly&#39;/ ! weights  ! rotation ! land/sea mask !</span>
<span class="go">         !           !             !  (if &lt;0  months)  !   name    !  (logical)  !  (T/F)  ! &#39;monthly&#39; ! filename ! pairing  ! filename      !</span>
<span class="go">         sn_isfpar_zmax = &#39;NOT_USED&#39;  ,       0        ,&#39;sozisfmax&#39;,  .false.    , .true.  , &#39;yearly&#39;  ,    &#39;&#39;    ,   &#39;&#39;     ,    &#39;&#39;</span>
<span class="go">         sn_isfpar_zmin = &#39;NOT_USED&#39;  ,       0        ,&#39;sozisfmin&#39;,  .false.    , .true.  , &#39;yearly&#39;  ,    &#39;&#39;    ,   &#39;&#39;     ,    &#39;&#39;</span>
<span class="go">         !* &#39;spe&#39; and &#39;oasis&#39; case</span>
<span class="go">         sn_isfpar_fwf = &#39;NOT_USED&#39;   ,      -12.      ,&#39;sofwfisf&#39; ,  .false.    , .true.  , &#39;yearly&#39;   ,    &#39;&#39;    ,   &#39;&#39;     ,    &#39;&#39;</span>
<span class="go">         !* &#39;bg03&#39; case</span>
<span class="go">         sn_isfpar_Leff = &#39;NOT_USED&#39;  ,       0.       ,&#39;Leff&#39;     ,  .false.    , .true.  , &#39;yearly&#39;   ,    &#39;&#39;    ,   &#39;&#39;     ,    &#39;&#39;</span>
<span class="go">      !</span>
<span class="go">      ! ---------------- ice sheet coupling -------------------------------</span>
<span class="go">      !</span>
<span class="go">      ln_isfcpl = .false.</span>
<span class="go">         nn_drown       = 10        ! number of iteration of the extrapolation loop (fill the new wet cells)</span>
<span class="go">         ln_isfcpl_cons = .false.</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namlbc">
<h5><a class="toc-backref" href="#id19">namlbc</a><a class="headerlink" href="#namlbc" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>no slip condition is used.</p></li>
<li><p>Local change has been made to:</p>
<blockquote>
<div><ul class="simple">
<li><p>decrease slightly transport across Bering, we used no slip along this strait.</p></li>
<li><p>increase EKE in Lab sea, we set no slip along west coast of Greenland</p></li>
<li><p>improve Med sea representation, we set no slip in med Sea</p></li>
<li><p>This is done via the namlbc_drk block and the file <a class="reference internal" href="input_eORCA025.html#eorca025-shlat2d-v0-0"><span class="std std-ref">eORCA025_shlat2d_v0.0.nc</span></a>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namlbc        !   lateral momentum boundary condition                  (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                       !  free slip  !   partial slip  !   no slip   ! strong slip</span>
<span class="go">   rn_shlat    =    0.     !  shlat = 0  !  0 &lt; shlat &lt; 2  !  shlat = 2  !  2 &lt; shlat</span>
<span class="go">   ln_vorlat   = .false.   !  consistency of vorticity boundary condition with analytical Eqs.</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namlbc_drk    !   lateral momentum boundary condition                  (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_shlat2d  = .true.   !  use 2D file for shlat</span>
<span class="go">   cn_dir      = &#39;./&#39;</span>
<span class="go">   !___________!____________________!___________________!___________!_____________!________!___________!__________________!__________!_______________!</span>
<span class="go">   !           !  file name         ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights filename ! rotation ! land/sea mask !</span>
<span class="go">   !           !                    !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !                  ! pairing  !    filename   !</span>
<span class="go">   sn_shlat2d = &#39;eORCA025_shlat2d_v0.0&#39; , -12.          , &#39;shlat2d&#39; , .false.     , .true. ,  &#39;yearly&#39; , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namdrg">
<h5><a class="toc-backref" href="#id20">namdrg</a><a class="headerlink" href="#namdrg" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>quadratic bottom and top friction formulation is used.</p></li>
<li><p>implicit top/bottom/ice friction used for stability.</p></li>
<li><p>bottom friction value are set as the default</p></li>
<li><p>top drag is set to 2.5e-3 as in Chris paper</p></li>
<li><p>no uniform background tidal velocity set as we used a 2d file to prescribed it as advised by Jourdain et al. (2018)</p></li>
<li><p>a boost of the bottom drag is applied as in GO6 simulation (WHERE ?)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdrg        !   top/bottom drag coefficient                          (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_drg_OFF  = .false.   !  free-slip       : Cd = 0                  (F =&gt; fill namdrg_bot</span>
<span class="go">   ln_lin      = .false.   !      linear  drag: Cd = Cd0 Uc0                   &amp;   namdrg_top)</span>
<span class="go">   ln_non_lin  = .true.    !  non-linear  drag: Cd = Cd0 |U|</span>
<span class="go">   ln_loglayer = .false.   !  logarithmic drag: Cd = vkarmn/log(z/z0) |U|</span>
<span class="go">   !</span>
<span class="go">   ln_drgimp   = .true.    !  implicit top/bottom friction flag</span>
<span class="go">      ln_drgice_imp = .true. ! implicit ice-ocean drag</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdrg_top    !   TOP friction                                         (ln_drg_OFF =F &amp; ln_isfcav=T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   rn_Cd0      =  2.5e-3   !  drag coefficient [-]</span>
<span class="go">   rn_Uc0      =  0.4      !  ref. velocity [m/s] (linear drag=Cd0*Uc0)</span>
<span class="go">   rn_Cdmax    =  0.1      !  drag value maximum [-] (logarithmic drag)</span>
<span class="go">   rn_ke0      =  0.0      !  background kinetic energy  [m2/s2] (non-linear cases)</span>
<span class="go">   rn_z0       =  3.0e-3   !  roughness [m] (ln_loglayer=T)</span>
<span class="go">   ln_boost    = .false.   !  =T regional boost of Cd0 ; =F constant</span>
<span class="go">      rn_boost =  50.      !  local boost factor  [-]</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdrg_top_tipaccs !  TOP tidal velocity   (ln_boost = T )</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_2d_ttv   = .true.</span>
<span class="go">      rn_ttv_sf= 0.777 ! jourdain et al. (2018)</span>
<span class="go">      cn_dirttv   = &#39;./&#39;       !  root directory for the boost file ( top friction)</span>
<span class="go">      !___________!____________!___________________!___________!_____________!________!___________!___________!__________!_______________!</span>
<span class="go">      !           !  file name ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights e ! rotation ! land/sea mask !</span>
<span class="go">      !           !            !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !  filename ! pairing  !    filename   !</span>
<span class="go">      sn_ttv      = &#39;eORCA025_ttv_b0.2_v0.0.nc&#39;,   0.  , &#39;ttv&#39; ,    .false.  , .true. , &#39;yearly&#39;  ,   &#39;&#39;      ,   &#39;&#39;     ,   &#39;&#39;</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdrg_bot    !   BOTTOM friction                                      (ln_OFF =F)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   rn_Cd0      =  1.e-3    !  drag coefficient [-]</span>
<span class="go">   rn_Uc0      =  0.4      !  ref. velocity [m/s] (linear drag=Cd0*Uc0)</span>
<span class="go">   rn_Cdmax    =  0.1      !  drag value maximum [-] (logarithmic drag)</span>
<span class="go">   rn_ke0      =  2.5e-3   !  background kinetic energy  [m2/s2] (non-linear cases)</span>
<span class="go">   rn_z0       =  3.e-3    !  roughness [m] (ln_loglayer=T)</span>
<span class="go">   ln_boost    = .true.    !  =T regional boost of Cd0 ; =F constant</span>
<span class="go">      rn_boost =  50.         !  local boost factor  [-]</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdrg_bot_drk    !   BOTTOM friction     (ln_boost = T )</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   cn_dir      = &#39;./&#39;      !  root directory for the boost file ( bot friction)</span>
<span class="go">   !___________!____________!___________________!___________!_____________!________!___________!___________!__________!_______________!</span>
<span class="go">   !           !  file name ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights e ! rotation ! land/sea mask !</span>
<span class="go">   !           !            !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !  filename ! pairing  !    filename   !</span>
<span class="go">   sn_boost    = &#39;eORCA025_bfr2d_v0.0.nc&#39; , -12. , &#39;bfr_coef&#39;,  .false.   , .true. , &#39;yearly&#39;  ,   &#39;&#39;      ,   &#39;&#39;     ,   &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="nambbc">
<h5><a class="toc-backref" href="#id21">nambbc</a><a class="headerlink" href="#nambbc" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>geothermal heat flux is prescribed by an annual climatology</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;nambbc        !   bottom temperature boundary condition                (default: OFF)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_trabbc   = .true.   !  Apply a geothermal heating at the ocean bottom</span>
<span class="go">      nn_geoflx     = 2       !  geothermal heat flux: = 1 constant flux</span>
<span class="go">      !                       !                        = 2 read variable flux [mW/m2]</span>
<span class="go">      rn_geoflx_cst = 86.4e-3 !  Constant value of geothermal heat flux       [mW/m2]</span>

<span class="go">   cn_dir      = &#39;./&#39;      !  root directory for the geothermal data location</span>
<span class="go">   !___________!_________________________!___________________!___________!_____________!________!___________!__________________!__________!_______________!</span>
<span class="go">   !           !  file name              ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights filename ! rotation ! land/sea mask !</span>
<span class="go">   !           !                         !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !                  ! pairing  !    filename   !</span>
<span class="go">   sn_qgh      =&#39;ghflux_v2.0.nc&#39;         ,       -12.        , &#39;gh_flux&#39; ,   .false.   , .true. , &#39;yearly&#39;  , &#39;eORCA025_ghflux_v2.0_c3.0_weights_bilin.nc&#39; ,   &#39;&#39;     ,   &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="nambbl">
<h5><a class="toc-backref" href="#id22">nambbl</a><a class="headerlink" href="#nambbl" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>bottom boundary layer parametrisation is used as in GO6 simulation (does this param really efficient, I don’t know).</p></li>
<li><p>bbl activated on k level (not on depth)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;nambbl        !   bottom boundary layer scheme                         (default: OFF)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_trabbl   = .true.       !  Bottom Boundary Layer parameterisation flag</span>
<span class="go">      nn_bbl_ldf  =  1        !  diffusive bbl (=1)   or not (=0)</span>
<span class="go">      nn_bbl_adv  =  1        !  advective bbl (=1/2) or not (=0)</span>
<span class="go">      rn_ahtbbl   =  1000.    !  lateral mixing coefficient in the bbl  [m2/s]</span>
<span class="go">      rn_gambbl   =  10.      !  advective bbl coefficient                 [s]</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;nambbl_drk   !   bottom boundary layer scheme</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_kriteria = .true.       !  activate bbl only on different k level</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="nameos">
<h5><a class="toc-backref" href="#id23">nameos</a><a class="headerlink" href="#nameos" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>we use eos10 instead of eos80. =&gt; ALL OUPUT WILL USE EOS10 UNITS</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;nameos        !   ocean Equation Of Seawater                           (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">ln_teos10   = .true.          !  = Use TEOS-10</span>
<span class="go">ln_eos80    = .false          !  = Use EOS80</span>
<span class="go">ln_seos     = .false.         !  = Use S-EOS (simplified Eq.)</span>
<span class="go">                             !</span>
<span class="go">!                     ! S-EOS coefficients (ln_seos=T):</span>
<span class="go">!                             !  rd(T,S,Z)*rau0 = -a0*(1+.5*lambda*dT+mu*Z+nu*dS)*dT+b0*dS</span>
<span class="go">rn_a0       =  1.6550e-1      !  thermal expension coefficient</span>
<span class="go">rn_b0       =  7.6554e-1      !  saline  expension coefficient</span>
<span class="go">rn_lambda1  =  5.9520e-2      !  cabbeling coeff in T^2  (=0 for linear eos)</span>
<span class="go">rn_lambda2  =  7.4914e-4      !  cabbeling coeff in S^2  (=0 for linear eos)</span>
<span class="go">rn_mu1      =  1.4970e-4      !  thermobaric coeff. in T (=0 for linear eos)</span>
<span class="go">rn_mu2      =  1.1090e-5      !  thermobaric coeff. in S (=0 for linear eos)</span>
<span class="go">rn_nu       =  2.4341e-3      !  cabbeling coeff in T*S  (=0 for linear eos)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namtra">
<h5><a class="toc-backref" href="#id24">namtra</a><a class="headerlink" href="#namtra" title="Permalink to this headline">¶</a></h5>
<div class="section" id="namtra-dmp">
<h6><a class="toc-backref" href="#id25">namtra_dmp</a><a class="headerlink" href="#namtra-dmp" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>3d tracer damping is done in Red sea and persic gulf (180 days)</p></li>
<li><p>strong restoring downstream of Gib, Bab el mandel and Ormuz strait (6d)</p></li>
<li><p>depth range for Gib is 600-1300m</p></li>
<li><p>depth range for bab el mandeb 0-6000</p></li>
<li><p>depth range for Ormuz 0-6000</p></li>
<li><p>Location and restoring strength are hard coded. No file is needed.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtra_dmp    !   tracer: T &amp; S newtonian damping                      (default: OFF)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go"> ln_tradmp   =  .true.      !  add a damping term (using resto.nc coef.)</span>
<span class="go">    nn_zdmp  =    0         !  vertical shape =0    damping throughout the water column</span>
<span class="go">    !                       !                 =1 no damping in the mixing layer (kz  criteria)</span>
<span class="go">    !                       !                 =2 no damping in the mixed  layer (rho crieria)</span>
<span class="go">    cn_resto = &#39;NOT_USED&#39;   !  Name of file containing restoration coeff. field (use dmp_tools to create this)</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtra_dmp_drk !   tracer: T &amp; S newtonian damping                      (default: OFF)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go"> nn_hdmp     =   -2       !  -2 = Drakkar customisation ( use dtacof in tradmp.F90 )</span>
<span class="go">                          !  any other value : Nemo standard code</span>
<span class="go"> nn_file     =    1       !  create a damping.coeff NetCDF file (=1) or not (=0)</span>
<span class="go">                          !  The output file can then be used as input resto file (cn_resto)</span>
<span class="go"> ln_dmpmask  = .false.    !  Read dmp_mask.nc file  when T (between 0 and 1 )</span>
<span class="go">    rn_timsk    =  730.     !  Time scale used for dmp_mask</span>
<span class="go">    cn_dir      =  &#39;./&#39;     ! directtory wher to find damping mask</span>
<span class="go"> !___________!____________!___________________!___________!_____________!________!___________!___________!__________!_______________!</span>
<span class="go"> !           !  file name ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights e ! rotation ! land/sea mask !</span>
<span class="go"> !           !            !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !  filename ! pairing  !    filename   !</span>
<span class="go"> sn_dmp      = &#39;eORCA025.L121_dmpmsk_v0.0&#39; ,  -12. ,  &#39;wdmp&#39; , .false.  , .true. , &#39;yearly&#39;  ,   &#39;&#39;      ,   &#39;&#39;     ,   &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namtra-qsr">
<h6><a class="toc-backref" href="#id26">namtra_qsr</a><a class="headerlink" href="#namtra-qsr" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>RGB light penetration is activated</p></li>
<li><p>2d climatology of chlorophyl is provided (<a class="reference internal" href="input_eORCA025.html#chlorophyl-v0-0"><span class="std std-ref">chlorophyl_v0.0.nc</span></a>)</p></li>
<li><p>rn_abs is decrease by 10% compare to the default value (advised by MERCATOR)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtra_qsr    !   penetrative solar radiation                          (ln_traqsr =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                       !  type of penetration                        (default: NO selection)</span>
<span class="go">   ln_qsr_rgb  = .true.       !  RGB light penetration (Red-Green-Blue)</span>
<span class="go">   ln_qsr_2bd  = .false.      !  2BD light penetration (two bands)</span>
<span class="go">   ln_qsr_bio  = .false.      !  bio-model light penetration</span>
<span class="go">   !                       !  RGB &amp; 2BD choices:</span>
<span class="go">   rn_abs      =   0.53       !  RGB &amp; 2BD: fraction absorbed in the very near surface  ! std value 0.58. RBB -&gt; 0.53</span>
<span class="go">   rn_si0      =   0.35       !  RGB &amp; 2BD: shortess depth of extinction</span>
<span class="go">   nn_chldta   =      1       !  RGB : Chl data (=1) or cst value (=0)</span>
<span class="go">   rn_si1      =   23.0       !  2BD : longest depth of extinction</span>
<span class="go">   !                       !  type of penetration                        (default: NO selection)</span>

<span class="go">   cn_dir      = &#39;./&#39;      !  root directory for the chlorophyl data location</span>
<span class="go">   !___________!_________________________!___________________!___________!_____________!________!___________!__________!__________!_______________!</span>
<span class="go">   !           !  file name              ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights  ! rotation ! land/sea mask !</span>
<span class="go">   !           !                         !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; ! filename ! pairing  !    filename   !</span>
<span class="go">   sn_chl      = &#39;chlorophyl_v0.0.nc&#39;    , -1.               , &#39;CHLA&#39;    ,   .true.    , .true. , &#39;yearly&#39;  , &#39;eORCA025_chlorophyl_v0.0_c3.0_weights_bilin.nc&#39;       , &#39;&#39;       , &#39;&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namtra-adv">
<h6><a class="toc-backref" href="#id27">namtra_adv</a><a class="headerlink" href="#namtra-adv" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>tracer advection scheme is FCT (old TVD scheme)</p></li>
<li><p>2th order is used on horizontal and vertical (4th order not compatible with iceshelf need to be investigated)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtra_adv    !   advection scheme for tracer                          (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_traadv_OFF = .false. !  No tracer advection</span>
<span class="go">   ln_traadv_cen = .false. !  2nd order centered scheme</span>
<span class="go">      nn_cen_h   =  4            !  =2/4, horizontal 2nd order CEN / 4th order CEN</span>
<span class="go">      nn_cen_v   =  4            !  =2/4, vertical   2nd order CEN / 4th order COMPACT</span>
<span class="go">   ln_traadv_fct = .true.  !  FCT scheme</span>
<span class="go">      nn_fct_h   =  4            !  =2/4, horizontal 2nd / 4th order</span>
<span class="go">      nn_fct_v   =  2            !  =2/4, vertical   2nd / COMPACT 4th order</span>
<span class="go">   ln_traadv_mus = .false. !  MUSCL scheme</span>
<span class="go">      ln_mus_ups = .false.       !  use upstream scheme near river mouths</span>
<span class="go">   ln_traadv_ubs = .false. !  UBS scheme</span>
<span class="go">      nn_ubs_v   =  2            !  =2  , vertical 2nd order FCT / COMPACT 4th order</span>
<span class="go">   ln_traadv_qck = .false. !  QUICKEST scheme</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namtra-ldf">
<h6><a class="toc-backref" href="#id28">namtra_ldf</a><a class="headerlink" href="#namtra-ldf" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>isopycnal laplacian tracers</p></li>
<li><p>2d variation (scale with the grid size)</p></li>
<li><p>coefficient set as in GO8 prototype</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namtra_ldf    !   lateral diffusion scheme for tracers                 (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                       !  Operator type:</span>
<span class="go">   ln_traldf_OFF   = .false.   !  No explicit diffusion</span>
<span class="go">   ln_traldf_lap   = .true.    !    laplacian operator</span>
<span class="go">   ln_traldf_blp   = .false.   !  bilaplacian operator</span>
<span class="go">   !</span>
<span class="go">   !                       !  Direction of action:</span>
<span class="go">   ln_traldf_lev   = .false.   !  iso-level</span>
<span class="go">   ln_traldf_hor   = .false.   !  horizontal  (geopotential)</span>
<span class="go">   ln_traldf_iso   = .true.    !  iso-neutral (standard operator)</span>
<span class="go">   ln_traldf_triad = .false.   !  iso-neutral (triad    operator)</span>
<span class="go">   !</span>
<span class="go">   !                             !  iso-neutral options:</span>
<span class="go">   ln_traldf_msc   = .false.   !  Method of Stabilizing Correction      (both operators)</span>
<span class="go">   rn_slpmax       =  0.01     !  slope limit                           (both operators)</span>
<span class="go">   ln_triad_iso    = .false.   !  pure horizontal mixing in ML              (triad only)</span>
<span class="go">   rn_sw_triad     = 1         !  =1 switching triad ; =0 all 4 triads used (triad only)</span>
<span class="go">   ln_botmix_triad = .false.   !  lateral mixing on bottom                  (triad only)</span>
<span class="go">   !</span>
<span class="go">   !                       !  Coefficients:</span>
<span class="go">   nn_aht_ijk_t    = 20        !  space/time variation of eddy coefficient:</span>
<span class="go">      !                             !   =-20 (=-30)    read in eddy_diffusivity_2D.nc (..._3D.nc) file</span>
<span class="go">      !                             !   =  0           constant</span>
<span class="go">      !                             !   = 10 F(k)      =ldf_c1d</span>
<span class="go">      !                             !   = 20 F(i,j)    =ldf_c2d</span>
<span class="go">      !                             !   = 21 F(i,j,t)  =Treguier et al. JPO 1997 formulation</span>
<span class="go">      !                             !   = 30 F(i,j,k)  =ldf_c2d * ldf_c1d</span>
<span class="go">      !                             !   = 31 F(i,j,k,t)=F(local velocity and grid-spacing)</span>
<span class="go">      !                        !  time invariant coefficients:  aht0 = 1/2  Ud*Ld   (lap case)</span>
<span class="go">      !                             !                           or   = 1/12 Ud*Ld^3 (blp case)</span>
<span class="go">      rn_Ud        = 0.011          !  lateral diffusive velocity [m/s] (nn_aht_ijk_t= 0, 10, 20, 30)</span>
<span class="go">      rn_Ld        = 200.e+3        !  lateral diffusive length   [m]   (nn_aht_ijk_t= 0, 10)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="namdyn">
<h5><a class="toc-backref" href="#id29">namdyn</a><a class="headerlink" href="#namdyn" title="Permalink to this headline">¶</a></h5>
<div class="section" id="namdyn-adv">
<h6><a class="toc-backref" href="#id30">namdyn_adv</a><a class="headerlink" href="#namdyn-adv" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>vector form advection scheme is used with Hollingsworth Correction</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_adv    !   formulation of the momentum advection                (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_dynadv_OFF = .false. !  linear dynamics (no momentum advection)</span>
<span class="go">   ln_dynadv_vec = .true.  !  vector form - 2nd centered scheme</span>
<span class="go">     nn_dynkeg   = 1        ! grad(KE) scheme: =0   C2  ;  =1   Hollingsworth correction</span>
<span class="go">   ln_dynadv_cen2 = .false. !  flux form - 2nd order centered scheme</span>
<span class="go">   ln_dynadv_ubs = .false. !  flux form - 3rd order UBS      scheme</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namdyn-vor">
<h6><a class="toc-backref" href="#id31">namdyn_vor</a><a class="headerlink" href="#namdyn-vor" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>vorticity scheme is een with the old formulation (e3f computation) (as used by GO8 prototype)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_vor    !   Vorticity / Coriolis scheme                          (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_dynvor_ene = .false. !  energy    conserving scheme</span>
<span class="go">   ln_dynvor_ens = .false. !  enstrophy conserving scheme</span>
<span class="go">   ln_dynvor_mix = .false. !  mixed scheme</span>
<span class="go">   ln_dynvor_enT = .false. !  energy conserving scheme (T-point)</span>
<span class="go">   ln_dynvor_eeT = .false. !  energy conserving scheme (een using e3t)</span>
<span class="go">   ln_dynvor_een = .true.  !  energy &amp; enstrophy scheme</span>
<span class="go">      nn_een_e3f = 0          ! =0  e3f = mi(mj(e3t))/4</span>
<span class="go">      !                       ! =1  e3f = mi(mj(e3t))/mi(mj( tmask))</span>
<span class="go">   ln_dynvor_msk = .false. !  vorticity multiplied by fmask (=T)        ==&gt;&gt;&gt; PLEASE DO NOT ACTIVATE</span>
<span class="go">      !                    !  (f-point vorticity schemes only)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namdyn-ldf">
<h6><a class="toc-backref" href="#id32">namdyn_ldf</a><a class="headerlink" href="#namdyn-ldf" title="Permalink to this headline">¶</a></h6>
<ul>
<li><p>bilaplacian formulation</p></li>
<li><p>2d variation (grid size scaling)</p></li>
<li><p>horizontal direction</p></li>
<li><p>coefficient as in GO8 prototype</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_ldf    !   lateral diffusion on momentum                        (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                       !  Type of the operator :</span>
<span class="go">   ln_dynldf_OFF = .false.     !  No operator (i.e. no explicit diffusion)</span>
<span class="go">   ln_dynldf_lap = .false.     !    laplacian operator</span>
<span class="go">   ln_dynldf_blp = .true.      !  bilaplacian operator</span>
<span class="go">   !                       !  Direction of action  :</span>
<span class="go">   ln_dynldf_lev = .false.     !  iso-level</span>
<span class="go">   ln_dynldf_hor = .true.      !  horizontal  (geopotential)</span>
<span class="go">   ln_dynldf_iso = .false.     !  iso-neutral (lap only)</span>
<span class="go">   !                       !  Coefficient</span>
<span class="go">   nn_ahm_ijk_t  = 20          !  space/time variation of eddy coefficient :</span>
<span class="go">      !                             !  =-30  read in eddy_viscosity_3D.nc file</span>
<span class="go">      !                             !  =-20  read in eddy_viscosity_2D.nc file</span>
<span class="go">      !                             !  =  0  constant</span>
<span class="go">      !                             !  = 10  F(k)=c1d</span>
<span class="go">      !                             !  = 20  F(i,j)=F(grid spacing)=c2d</span>
<span class="go">      !                             !  = 30  F(i,j,k)=c2d*c1d</span>
<span class="go">      !                             !  = 31  F(i,j,k)=F(grid spacing and local velocity)</span>
<span class="go">      !                             !  = 32  F(i,j,k)=F(local gridscale and deformation rate)</span>
<span class="go">      !                        !  time invariant coefficients :  ahm = 1/2  Uv*Lv   (lap case)</span>
<span class="go">      !                             !                            or  = 1/12 Uv*Lv^3 (blp case)</span>
<span class="go">      rn_Uv      = 0.0838           !  lateral viscous velocity [m/s] (nn_ahm_ijk_t= 0, 10, 20, 30)</span>
<span class="go">      rn_Lv      = 10.e+3           !  lateral viscous length   [m]   (nn_ahm_ijk_t= 0, 10)</span>
<span class="go">      !                       !  Smagorinsky settings  (nn_ahm_ijk_t= 32) :</span>
<span class="go">      rn_csmc       = 3.5         !  Smagorinsky constant of proportionality</span>
<span class="go">      rn_minfac     = 1.0         !  multiplier of theorectical lower limit</span>
<span class="go">      rn_maxfac     = 1.0         !  multiplier of theorectical upper limit</span>
<span class="go">      !                       !  iso-neutral laplacian operator (ln_dynldf_iso=T) :</span>
<span class="go">      rn_ahm_b      = 0.0         !  background eddy viscosity  [m2/s]</span>
<span class="go">  /</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="namdyn-spg">
<h6><a class="toc-backref" href="#id33">namdyn_spg</a><a class="headerlink" href="#namdyn-spg" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>split explicity formulation</p></li>
<li><p>same set up as in GO8 prototype</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_spg    !   surface pressure gradient                            (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_dynspg_exp  = .false.   ! explicit free surface</span>
<span class="go">   ln_dynspg_ts   = .true.    ! split-explicit free surface</span>
<span class="go">      ln_bt_fw      = .true.     ! Forward integration of barotropic Eqs.</span>
<span class="go">      ln_bt_av      = .true.     ! Time filtering of barotropic variables</span>
<span class="go">         nn_bt_flt     = 1          ! Time filter choice  = 0 None</span>
<span class="go">         !                          !                     = 1 Boxcar over   nn_baro sub-steps</span>
<span class="go">         !                          !                     = 2 Boxcar over 2*nn_baro  &quot;    &quot;</span>
<span class="go">      ln_bt_auto    = .true.     ! Number of sub-step defined from:</span>
<span class="go">         rn_bt_cmax   =  0.8        ! =T : the Maximum Courant Number allowed</span>
<span class="go">         nn_baro      = 30          ! =F : the number of sub-step in rn_rdt seconds</span>
<span class="go">      rn_bt_alpha   = 0.         ! Temporal diffusion parameter (if ln_bt_av=F)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namdyn-hpg">
<h6><a class="toc-backref" href="#id34">namdyn_hpg</a><a class="headerlink" href="#namdyn-hpg" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>use of the isf formulation (as sco but with isf load included)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_hpg    !   Hydrostatic pressure gradient option                 (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   ln_hpg_zco  = .false.   !  z-coordinate - full steps</span>
<span class="go">   ln_hpg_zps  = .false.   !  z-coordinate - partial steps (interpolation)</span>
<span class="go">   ln_hpg_sco  = .false.   !  s-coordinate (standard jacobian formulation)</span>
<span class="go">   ln_hpg_isf  = .true.    !  s-coordinate (sco ) adapted to isf</span>
<span class="go">   ln_hpg_djc  = .false.   !  s-coordinate (Density Jacobian with Cubic polynomial)</span>
<span class="go">   ln_hpg_prj  = .false.   !  s-coordinate (Pressure Jacobian scheme)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="namzdf">
<h5><a class="toc-backref" href="#id35">namzdf</a><a class="headerlink" href="#namzdf" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>convection represented by an increase of kz (enhance vertical diffusion)</p></li>
<li><p>double diffusion activated (as in GO8 prototype)</p></li>
<li><p>internal wave mixing activated (new tidal mixing parametrisation, former one has been removed)</p></li>
<li><p>kz as recommended by Casimir (compatible with imx scheme). No need of a background as iwm activated.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namzdf        !   vertical physics manager                             (default: NO selection)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   !                       ! adaptive-implicit vertical advection</span>
<span class="go">   ln_zad_Aimp = .true.      !  Courant number dependent scheme (Shchepetkin 2015)</span>
<span class="go">   !</span>
<span class="go">   !                       ! type of vertical closure (required)</span>
<span class="go">   ln_zdfcst   = .false.      !  constant mixing</span>
<span class="go">   ln_zdfric   = .false.      !  local Richardson dependent formulation (T =&gt;   fill namzdf_ric)</span>
<span class="go">   ln_zdftke   = .true.       !  Turbulent Kinetic Energy closure       (T =&gt;   fill namzdf_tke)</span>
<span class="go">   ln_zdfgls   = .false.      !  Generic Length Scale closure           (T =&gt;   fill namzdf_gls)</span>
<span class="go">   ln_zdfosm   = .false.      !  OSMOSIS BL closure                     (T =&gt;   fill namzdf_osm)</span>
<span class="go">   !</span>
<span class="go">   !                       ! convection</span>
<span class="go">   ln_zdfevd   = .true.       !  enhanced vertical diffusion</span>
<span class="go">      nn_evdm     =    1         ! apply on tracer (=0) or on tracer and momentum (=1)</span>
<span class="go">      rn_evd      =   10.        ! mixing coefficient [m2/s]</span>
<span class="go">   !</span>
<span class="go">   ln_zdfnpc   = .false.      !  Non-Penetrative Convective algorithm</span>
<span class="go">      nn_npc      =    1         ! frequency of application of npc</span>
<span class="go">      nn_npcp     =  365         ! npc control print frequency</span>
<span class="go">   !</span>
<span class="go">   ln_zdfddm   = .true.    ! double diffusive mixing</span>
<span class="go">      rn_avts  =    1.e-4     !  maximum avs (vertical mixing on salinity)</span>
<span class="go">      rn_hsbfr =    1.6       !  heat/salt buoyancy flux ratio</span>
<span class="go">   !</span>
<span class="go">   !                       ! gravity wave-driven vertical mixing</span>
<span class="go">   ln_zdfiwm   = .true.       ! internal wave-induced mixing            (T =&gt;   fill namzdf_iwm)</span>
<span class="go">   ln_zdfswm   = .false.      ! surface  wave-induced mixing            (T =&gt; ln_wave=ln_sdw=T )</span>
<span class="go">   !</span>
<span class="go">   !                       ! coefficients</span>
<span class="go">   rn_avm0     =   1.4e-6     !  vertical eddy viscosity   [m2/s]       (background Kz if ln_zdfcst=F)</span>
<span class="go">   rn_avt0     =   1.4e-7     !  vertical eddy diffusivity [m2/s]       (background Kz if ln_zdfcst=F)</span>
<span class="go">   nn_avb      =    0         !  profile for background avt &amp; avm (=1) or not (=0)</span>
<span class="go">   nn_havtb    =    1         !  horizontal shape for avtb (=1) or not (=0)</span>
<span class="go">/</span>
</pre></div>
</div>
<div class="section" id="namzdf-tke">
<h6><a class="toc-backref" href="#id36">namzdf_tke</a><a class="headerlink" href="#namzdf-tke" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>tke emin adjusted to take into account iwm activation (as advised by Casimir De Lavergne)</p></li>
<li><p>as GO8 prototype except for the type of exponential decrease of tke below the mixed layer (as DRAKKAR)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namzdf_tke    !   turbulent eddy kinetic dependent vertical diffusion  (ln_zdftke =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">rn_ediff    =   0.1     !  coef. for vertical eddy coef. (avt=rn_ediff*mxl*sqrt(e) )</span>
<span class="go">rn_ediss    =   0.7     !  coef. of the Kolmogoroff dissipation</span>
<span class="go">rn_ebb      =  67.83    !  coef. of the surface input of tke (=67.83 suggested when ln_mxl0=T)</span>
<span class="go">rn_emin     =   1.e-10  !  minimum value of tke [m2/s2] (1.e-10 is because of iwm)</span>
<span class="go">rn_emin0    =   1.e-4   !  surface minimum value of tke [m2/s2]</span>
<span class="go">rn_bshear   =   1.e-20  ! background shear (&gt;0) currently a numerical threshold (do not change it)</span>
<span class="go">nn_pdl      =   1       !  Prandtl number function of richarson number (=1, avt=pdl(Ri)*avm) or not (=0, avt=avm)</span>
<span class="go">nn_mxl      =   3       !  mixing length: = 0 bounded by the distance to surface and bottom</span>
<span class="go">!                       !                 = 1 bounded by the local vertical scale factor</span>
<span class="go">!                       !                 = 2 first vertical derivative of mixing length bounded by 1</span>
<span class="go">!                       !                 = 3 as =2 with distinct dissipative an mixing length scale</span>
<span class="go">ln_mxl0     = .true.    !  surface mixing length scale = F(wind stress) (T) or not (F)</span>
<span class="go">  nn_mxlice    = 2        ! type of scaling under sea-ice</span>
<span class="go">                          !    = 0 no scaling under sea-ice</span>
<span class="go">                          !    = 1 scaling with constant sea-ice thickness</span>
<span class="go">                          !    = 2 scaling with mean sea-ice thickness ( only with SI3 sea-ice model )</span>
<span class="go">                          !    = 3 scaling with maximum sea-ice thickness</span>
<span class="go">  rn_mxlice   = 10.       ! max constant ice thickness value when scaling under sea-ice ( nn_mxlice=1)</span>
<span class="go">rn_mxl0     =   0.04    !  surface  buoyancy lenght scale minimum value</span>
<span class="go">ln_drg      = .true.    !  top/bottom friction added as boundary condition of TKE</span>
<span class="go">ln_lc       = .true.    !  Langmuir cell parameterisation (Axell 2002)</span>
<span class="go">  rn_lc       =   0.15    !  coef. associated to Langmuir cells</span>
<span class="go">nn_etau     =   1       !  penetration of tke below the mixed layer (ML) due to NIWs</span>
<span class="go">                          !        = 0 none ; = 1 add a tke source below the ML</span>
<span class="go">                          !        = 2 add a tke source just at the base of the ML</span>
<span class="go">                          !        = 3 as = 1 applied on HF part of the stress           (ln_cpl=T)</span>
<span class="go">  rn_efr      =   0.05    !  fraction of surface tke value which penetrates below the ML (nn_etau=1 or 2)</span>
<span class="go">  nn_htau     =   1       !  type of exponential decrease of tke penetration below the ML</span>
<span class="go">                          !        = 0  constant 10 m length scale</span>
<span class="go">                          !        = 1  0.5m at the equator to 30m poleward of 40 degrees</span>
<span class="go">  nn_eice     =   3       !  below sea ice: =0 ON ; =4 OFF when ice fraction &gt; 1/4</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namzdf-iwm">
<h6><a class="toc-backref" href="#id37">namzdf_iwm</a><a class="headerlink" href="#namzdf-iwm" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>inernal wave mixing setup as advised by Casimir (see description of the param in <a class="reference internal" href="input_DATA.html#de-lavergne-et-al-2016"><span class="std std-ref">De_Lavergne_2016</span></a>)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namzdf_iwm    !    internal wave-driven mixing parameterization        (ln_zdfiwm =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   nn_zpyc     = 2         !  pycnocline-intensified dissipation scales as N (=1) or N^2 (=2)</span>
<span class="go">   ln_mevar    = .true.    !  variable (T) or constant (F) mixing efficiency</span>
<span class="go">   ln_tsdiff   = .true.    !  account for differential T/S mixing (T) or not (F)</span>
<span class="go">/</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">&amp;namzdf_iwm_drk  !    internal wave-driven mixing parameterization      (ln_zdfiwm =T)</span>
<span class="go">!-----------------------------------------------------------------------</span>
<span class="go">   cn_dir     =  &#39;./&#39;</span>
<span class="go">   !___________!_________________________!___________________!___________!_____________!________!___________!__________________!__________!_______________!</span>
<span class="go">   !           !  file name              ! frequency (hours) ! variable  ! time interp.!  clim  ! &#39;yearly&#39;/ ! weights filename ! rotation ! land/sea mask !</span>
<span class="go">   !           !                         !  (if &lt;0  months)  !   name    !   (logical) !  (T/F) ! &#39;monthly&#39; !                  ! pairing  !    filename   !</span>
<span class="go">   sn_iwmdsc   = &#39;eORCA025_iwm_b0.2_v0.0&#39; ,  -12.        , &#39;decay_scale_cri&#39; , .false.  , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_iwmdsb   = &#39;eORCA025_iwm_b0.2_v0.0&#39; ,  -12.        , &#39;decay_scale_bot&#39; , .false.  , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_iwmmpc   = &#39;eORCA025_iwm_b0.2_v0.0&#39; ,  -12.        , &#39;mixing_power_cri&#39;, .false.  , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_iwmmpp   = &#39;eORCA025_iwm_b0.2_v0.0&#39; ,  -12.        , &#39;mixing_power_pyc&#39;, .false.  , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>
<span class="go">   sn_iwmmpb   = &#39;eORCA025_iwm_b0.2_v0.0&#39; ,  -12.        , &#39;mixing_power_bot&#39;, .false.  , .true. , &#39;yearly&#39;  , &#39;&#39;               , &#39;&#39;       , &#39;&#39;</span>

<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="namelist-ice">
<h4><a class="toc-backref" href="#id38">namelist_ice</a><a class="headerlink" href="#namelist-ice" title="Permalink to this headline">¶</a></h4>
<div class="section" id="nampar">
<h5><a class="toc-backref" href="#id39">nampar</a><a class="headerlink" href="#nampar" title="Permalink to this headline">¶</a></h5>
<p>SI3 is run with:
* 5 ice categories
* 2 layer of ice
* 1 layer of snow
* a limiter on sea ice concentration set to 0.997</p>
<p>Obviously ice thermodynamics and ice dynamics are activated.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;nampar         !   Generic parameters</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go"> jpl              =   5             !  number of ice  categories</span>
<span class="go"> nlay_i           =   2             !  number of ice  layers</span>
<span class="go"> nlay_s           =   1             !  number of snow layers (only 1 is working)</span>
<span class="go"> ln_virtual_itd   =   .false.       !  virtual ITD mono-category parameterization (jpl=1 only)</span>
<span class="go">                                    !     i.e. enhanced thermal conductivity &amp; virtual thin ice melting</span>
<span class="go"> ln_icedyn        = .true.          !  ice dynamics (T) or not (F)</span>
<span class="go"> ln_icethd        = .true.          !  ice thermo   (T) or not (F)</span>
<span class="go"> rn_amax_n        =   0.997         !  maximum tolerated ice concentration NH</span>
<span class="go"> rn_amax_s        =   0.997         !  maximum tolerated ice concentration SH</span>
<span class="go"> cn_icerst_in     = &quot;restart_ice&quot;   !  suffix of ice restart name (input)</span>
<span class="go"> cn_icerst_out    = &quot;restart_ice&quot;   !  suffix of ice restart name (output)</span>
<span class="go"> cn_icerst_indir  = &quot;&lt;CN_DIRRST&gt;&quot;   !  directory to read   input ice restarts</span>
<span class="go"> cn_icerst_outdir = &quot;&lt;CN_DIRRST&gt;&quot;   !  directory to write output ice restarts</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namitd">
<h5><a class="toc-backref" href="#id40">namitd</a><a class="headerlink" href="#namitd" title="Permalink to this headline">¶</a></h5>
<p>The definition of the jpl categories is automatically defined.
The minimum/maximum sea ice thickness being 0.1/99 meters of ice.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namitd         !   Ice discretization</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_cat_hfn       = .true.          !  ice categories are defined by a function following rn_himean**(-0.05)</span>
<span class="go">      rn_himean     =   2.0           !  expected domain-average ice thickness (m)</span>
<span class="go">   ln_cat_usr       = .false.         !  ice categories are defined by rn_catbnd below (m)</span>
<span class="go">      rn_catbnd     =   0.,0.45,1.1,2.1,3.7,6.0</span>
<span class="go">   rn_himin         =   0.1           !  minimum ice thickness (m) allowed</span>
<span class="go">   rn_himax         =  99.0           !  maximum ice thickness (m) allowed</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h5><a class="toc-backref" href="#id41">namdyn</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>All the ice dynamics component are activated:
* rheology
* advection
* ridging/rafting
* corrections</p>
<p>We set no slip sea ice and landfast ice parametrisation is not activated.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namdyn         !   Ice dynamics</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_dynALL        = .true.          !  dyn.: full ice dynamics                  (rheology + advection + ridging/rafting + correction)</span>
<span class="go">   ln_dynRHGADV     = .false.         !  dyn.: no ridge/raft &amp; no corrections     (rheology + advection)</span>
<span class="go">   ln_dynADV1D      = .false.         !  dyn.: only advection 1D                  (Schar &amp; Smolarkiewicz 1996 test case)</span>
<span class="go">   ln_dynADV2D      = .false.         !  dyn.: only advection 2D w prescribed vel.(rn_uvice + advection)</span>
<span class="go">      rn_uice       =   0.5           !        prescribed ice u-velocity</span>
<span class="go">      rn_vice       =   0.5           !        prescribed ice v-velocity</span>
<span class="go">   rn_ishlat        =   2.            !  lbc : free slip (0) ; partial slip (0-2) ; no slip (2) ; strong slip (&gt;2)</span>
<span class="go">   ln_landfast_L16  = .false.         !  landfast: parameterization from Lemieux 2016</span>
<span class="go">      rn_lf_depfra  =   0.125         !        fraction of ocean depth that ice must reach to initiate landfast</span>
<span class="go">                                      !          recommended range: [0.1 ; 0.25]</span>
<span class="go">      rn_lf_bfr     =  15.            !        maximum bottom stress per unit volume [N/m3]</span>
<span class="go">      rn_lf_relax   =   1.e-5         !        relaxation time scale to reach static friction [s-1]</span>
<span class="go">      rn_lf_tensile =   0.05          !        isotropic tensile strength [0-0.5??]</span>
<span class="go">/</span>
</pre></div>
</div>
<div class="section" id="namdyn-rdgrft">
<h6><a class="toc-backref" href="#id42">namdyn_rdgrft</a><a class="headerlink" href="#namdyn-rdgrft" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>ice strength use Hibler 79 and the defult values</p></li>
<li><p>ridging and rafting activated with default values</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_rdgrft  !   Ice ridging/rafting</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">          ! -- ice_rdgrft_strength -- !</span>
<span class="go">   ln_str_H79       = .true.          !  ice strength param.: Hibler_79   =&gt; P = pstar*&lt;h&gt;*exp(-c_rhg*A)</span>
<span class="go">      rn_pstar      =   2.0e+04       !     ice strength thickness parameter [N/m2]</span>
<span class="go">      rn_crhg       =   20.0          !     ice strength conc. parameter (-)</span>
<span class="go">                   ! -- ice_rdgrft -- !</span>
<span class="go">   rn_csrdg         =   0.5           !  fraction of shearing energy contributing to ridging</span>
<span class="go">              ! -- ice_rdgrft_prep -- !</span>
<span class="go">   ln_partf_lin     = .false.         !  Linear ridging participation function (Thorndike et al, 1975)</span>
<span class="go">      rn_gstar      =   0.15          !     fractional area of thin ice being ridged</span>
<span class="go">   ln_partf_exp     = .true.          !  Exponential ridging participation function (Lipscomb, 2007)</span>
<span class="go">      rn_astar      =   0.03          !     exponential measure of ridging ice fraction [set to 0.05 if hstar=100]</span>
<span class="go">   ln_ridging       = .true.          !  ridging activated (T) or not (F)</span>
<span class="go">      rn_hstar      =  25.0           !     determines the maximum thickness of ridged ice [m] (Hibler, 1980)</span>
<span class="go">      rn_porordg    =   0.3           !     porosity of newly ridged ice (Lepparanta et al., 1995)</span>
<span class="go">      rn_fsnwrdg    =   0.5           !     snow volume fraction that survives in ridging</span>
<span class="go">      rn_fpndrdg    =   1.0           !     pond fraction that survives in ridging (small a priori)</span>
<span class="go">   ln_rafting       = .true.          !  rafting activated (T) or not (F)</span>
<span class="go">      rn_hraft      =   0.75          !     threshold thickness for rafting [m]</span>
<span class="go">      rn_craft      =   5.0           !     squeezing coefficient used in the rafting function</span>
<span class="go">      rn_fsnwrft    =   0.5           !     snow volume fraction that survives in rafting</span>
<span class="go">      rn_fpndrft    =   1.0           !     pond fraction that survives in rafting (0.5 a priori)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namdyn-rhg">
<h6><a class="toc-backref" href="#id43">namdyn_rhg</a><a class="headerlink" href="#namdyn-rhg" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><dl class="simple">
<dt>EVP rheology activated with:</dt><dd><ul>
<li><p>adaptative rheology (under advice from C. Rousset)</p></li>
<li><p>100 subcycle (under advice from C. Rousset)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_rhg     !   Ice rheology</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_rhg_EVP       = .true.          !  EVP rheology</span>
<span class="go">      ln_aEVP       = .true.          !     adaptive rheology (Kimmritz et al. 2016 &amp; 2017)</span>
<span class="go">      rn_creepl     =   2.0e-9        !     creep limit [1/s]</span>
<span class="go">      rn_ecc        =   2.0           !     eccentricity of the elliptical yield curve</span>
<span class="go">      nn_nevp       = 100             !     number of EVP subcycles</span>
<span class="go">      rn_relast     =   0.333         !     ratio of elastic timescale to ice time step: Telast = dt_ice * rn_relast</span>
<span class="go">                                      !        advised value: 1/3 (nn_nevp=100) or 1/9 (nn_nevp=300)</span>
<span class="go">   nn_rhg_chkcvg    =   0             !  check convergence of rheology</span>
<span class="go">                                      !     = 0  no check</span>
<span class="go">                                      !     = 1  check at the main time step (output xml: uice_cvg)</span>
<span class="go">                                      !     = 2  check at both main and rheology time steps (additional output: ice_cvg.nc)</span>
<span class="go">                                      !          this option 2 asks a lot of communications between cpu</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h6><a class="toc-backref" href="#id44">namdyn_adv</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>Prather advection scheme used</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namdyn_adv     !   Ice advection</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_adv_Pra       = .true.          !  Advection scheme (Prather)</span>
<span class="go">   ln_adv_UMx       = .false.         !  Advection scheme (Ultimate-Macho)</span>
<span class="go">      nn_UMx        =   5             !     order of the scheme for UMx (1-5 ; 20=centered 2nd order)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h5><a class="toc-backref" href="#id45">namsbc</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>ocean-ice drag coeficient set to 12.0e-3 (instead of 5, C. Rousset advise)</p></li>
<li><p>solar transmition use Lebrun et al. 2019 scheme.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namsbc         !   Ice surface boundary conditions</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   rn_cio           =  12.0e-03       !  ice-ocean drag coefficient (-)</span>
<span class="go">   nn_snwfra        =   2             !  calculate the fraction of ice covered by snow (for zdf and albedo)</span>
<span class="go">                                      !     = 0  fraction = 1 (if snow) or 0 (if no snow)</span>
<span class="go">                                      !     = 1  fraction = 1-exp(-0.2*rhos*hsnw) [MetO formulation]</span>
<span class="go">                                      !     = 2  fraction = hsnw / (hsnw+0.02)    [CICE formulation]</span>
<span class="go">   rn_snwblow       =   0.66          !  mesure of snow blowing into the leads</span>
<span class="go">                                      !     = 1 =&gt; no snow blowing, &lt; 1 =&gt; some snow blowing</span>
<span class="go">   nn_flxdist       =  -1             !  Redistribute heat flux over ice categories</span>
<span class="go">                                      !     =-1  Do nothing (needs N(cat) fluxes)</span>
<span class="go">                                      !     = 0  Average N(cat) fluxes then apply the average over the N(cat) ice</span>
<span class="go">                                      !     = 1  Average N(cat) fluxes then redistribute over the N(cat) ice using T-ice and albedo sensitivity</span>
<span class="go">                                      !     = 2  Redistribute a single flux over categories</span>
<span class="go">   ln_cndflx        = .false.         !  Use conduction flux as surface boundary conditions (i.e. for Jules coupling)</span>
<span class="go">      ln_cndemulate = .false.         !     emulate conduction flux (if not provided in the inputs)</span>
<span class="go">   nn_qtrice        =   1             !  Solar flux transmitted thru the surface scattering layer:</span>
<span class="go">                                      !     = 0  Grenfell and Maykut 1977 (depends on cloudiness and is 0 when there is snow)</span>
<span class="go">                                      !     = 1  Lebrun 2019 (equals 0.3 anytime with different melting/dry snw conductivities)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namthd">
<h5><a class="toc-backref" href="#id46">namthd</a><a class="headerlink" href="#namthd" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>all the thermodynamics is activated
- thickness change from growing/melting.
- lateral melting
- open water growth
- brine drainage
- melt ice before warming ocean, )</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd         !   Ice thermodynamics</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_icedH         = .true.          !  activate ice thickness change from growing/melting (T) or not (F)</span>
<span class="go">   ln_icedA         = .true.          !  activate lateral melting param. (T) or not (F)</span>
<span class="go">   ln_icedO         = .true.          !  activate ice growth in open-water (T) or not (F)</span>
<span class="go">   ln_icedS         = .true.          !  activate brine drainage (T) or not (F)</span>
<span class="go">   !</span>
<span class="go">   ln_leadhfx       = .true.          !  heat in the leads is used to melt sea-ice before warming the ocean</span>
<span class="go">/</span>
</pre></div>
</div>
<div class="section" id="namthd-zdf">
<h6><a class="toc-backref" href="#id47">namthd_zdf</a><a class="headerlink" href="#namthd-zdf" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>heat diffusion: Bitz and Lipscomb 1999</p></li>
<li><p>si thermal conductivity: Pringle et al., 2007</p></li>
<li><p>no check on convergence of heat diffusion scheme</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd_zdf     !   Ice heat diffusion</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_zdf_BL99      = .true.          !  Heat diffusion follows Bitz and Lipscomb 1999</span>
<span class="go">   ln_cndi_U64      = .false.         !  sea ice thermal conductivity: k = k0 + beta.S/T            (Untersteiner, 1964)</span>
<span class="go">   ln_cndi_P07      = .true.          !  sea ice thermal conductivity: k = k0 + beta1.S/T - beta2.T (Pringle et al., 2007)</span>
<span class="go">   rn_cnd_s         =   0.31          !  thermal conductivity of the snow (0.31 W/m/K, Maykut and Untersteiner, 1971)</span>
<span class="go">                                      !     Obs: 0.1-0.5 (Lecomte et al, JAMES 2013)</span>
<span class="go">   rn_kappa_i       =   1.0           !  radiation attenuation coefficient in sea ice                     [1/m]</span>
<span class="go">   rn_kappa_s       =  10.0           !  nn_qtrice = 0: radiation attenuation coefficient in snow         [1/m]</span>
<span class="go">   rn_kappa_smlt    =   7.0           !  nn_qtrice = 1: radiation attenuation coefficient in melting snow [1/m]</span>
<span class="go">   rn_kappa_sdry    =  10.0           !                 radiation attenuation coefficient in dry snow     [1/m]</span>
<span class="go">   ln_zdf_chkcvg    = .false.         !  check convergence of heat diffusion scheme (outputs: tice_cvgerr, tice_cvgstp)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namthd-da">
<h6><a class="toc-backref" href="#id48">namthd_da</a><a class="headerlink" href="#namthd-da" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>default coeficient</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd_da      !   Ice lateral melting</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   rn_beta          =   1.0           !  coef. beta for lateral melting param. Recommended range=[0.8-1.2]</span>
<span class="go">                                      !   =&gt; decrease = more melt and melt peaks toward higher concentration (A~0.5 for beta=1 ; A~0.8 for beta=0.2)</span>
<span class="go">                                      !      0.3 = best fit for western Fram Strait and Antarctica</span>
<span class="go">                                      !      1.4 = best fit for eastern Fram Strait</span>
<span class="go">   rn_dmin          =   8.            !  minimum floe diameter for lateral melting param. Recommended range=[6-10]</span>
<span class="go">                                      !   =&gt; 6  vs 8m = +40% melting at the peak (A~0.5)</span>
<span class="go">                                      !      10 vs 8m = -20% melting</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namthd-do">
<h6><a class="toc-backref" href="#id49">namthd_do</a><a class="headerlink" href="#namthd-do" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>frazil parametrisation activated (C. Rousset advise)</p></li>
<li><p>0.1 m minimal thickness for new sea ice created in open water</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd_do      !   Ice growth in open water</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   rn_hinew         =   0.1           !  thickness for new ice formation in open water (m), must be larger than rn_himin</span>
<span class="go">   ln_frazil        = .true.          !  Frazil ice parameterization (ice collection as a function of wind)</span>
<span class="go">      rn_maxfraz    =   1.0           !     maximum fraction of frazil ice collecting at the ice base</span>
<span class="go">      rn_vfraz      =   0.417         !     thresold drift speed for frazil ice collecting at the ice bottom (m/s)</span>
<span class="go">      rn_Cfraz      =   5.0           !     squeezing coefficient for frazil ice collecting at the ice bottom</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namthd-sal">
<h6><a class="toc-backref" href="#id50">namthd_sal</a><a class="headerlink" href="#namthd-sal" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>ice salinity is depth and time dependent</p></li>
<li><p>use of the default coefficient for min/max, restoring time scale and ice salinity</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd_sal     !   Ice salinity</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   nn_icesal        =   2             !  ice salinity option</span>
<span class="go">                                      !     1: constant ice salinity (S=rn_icesal)</span>
<span class="go">                                      !     2: varying salinity parameterization S(z,t)</span>
<span class="go">                                      !     3: prescribed salinity profile S(z) (Schwarzacher 1959)</span>
<span class="go">   rn_icesal        =   4.            !      (nn_icesal=1) ice salinity (g/kg)</span>
<span class="go">   rn_sal_gd        =   5.            !      (nn_icesal=2) restoring ice salinity, gravity drainage (g/kg)</span>
<span class="go">   rn_time_gd       =   1.73e+6       !      (nn_icesal=2) restoring time scale,   gravity drainage  (s)</span>
<span class="go">   rn_sal_fl        =   2.            !      (nn_icesal=2) restoring ice salinity, flushing (g/kg)</span>
<span class="go">   rn_time_fl       =   8.64e+5       !      (nn_icesal=2) restoring time scale,   flushing (s)</span>
<span class="go">   rn_simax         =  20.            !  maximum tolerated ice salinity (g/kg)</span>
<span class="go">   rn_simin         =   0.1           !  minimum tolerated ice salinity (g/kg)</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namthd-pnd">
<h6><a class="toc-backref" href="#id51">namthd_pnd</a><a class="headerlink" href="#namthd-pnd" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>melt pond activated with level ice melt pond scheme</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namthd_pnd     !   Melt ponds</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_pnd            = .true.         !  activate melt ponds or not</span>
<span class="go">      ln_pnd_LEV     = .true.         !  level ice melt ponds (from Flocco et al 2007,2010 &amp; Holland et al 2012)</span>
<span class="go">         rn_apnd_min =   0.15         !     minimum ice fraction that contributes to melt pond. range: 0.0 -- 0.15 ??</span>
<span class="go">         rn_apnd_max =   0.85         !     maximum ice fraction that contributes to melt pond. range: 0.7 -- 0.85 ??</span>
<span class="go">      ln_pnd_CST     = .false.        !  constant  melt ponds</span>
<span class="go">         rn_apnd     =   0.2          !     prescribed pond fraction, at Tsu=0 degC</span>
<span class="go">         rn_hpnd     =   0.05         !     prescribed pond depth,    at Tsu=0 degC</span>
<span class="go">      ln_pnd_lids    = .true.         !  frozen lids on top of the ponds (only for ln_pnd_LEV)</span>
<span class="go">      ln_pnd_alb     = .true.         !  effect of melt ponds on ice albedo</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="namini">
<h5><a class="toc-backref" href="#id52">namini</a><a class="headerlink" href="#namini" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>initialisation activated</p></li>
<li><p>initialisation NOT from file</p></li>
<li><p>default initial value</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namini         !   Ice initialization</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   ln_iceini        = .true.          !  activate ice initialization (T) or not (F)</span>
<span class="go">   nn_iceini_file   =   0             !     0 = Initialise sea ice based on SSTs</span>
<span class="go">                                      !     1 = Initialise sea ice from single category netcdf file</span>
<span class="go">                                      !     2 = Initialise sea ice from multi category restart file</span>
<span class="go">   rn_thres_sst     =   2.0           !  max temp. above Tfreeze with initial ice = (sst - tfreeze)</span>
<span class="go">   rn_hti_ini_n     =   3.0           !  initial ice thickness       (m), North</span>
<span class="go">   rn_hti_ini_s     =   1.0           !        &quot;            &quot;             South</span>
<span class="go">   rn_hts_ini_n     =   0.3           !  initial snow thickness      (m), North</span>
<span class="go">   rn_hts_ini_s     =   0.3           !        &quot;            &quot;             South</span>
<span class="go">   rn_ati_ini_n     =   0.9           !  initial ice concentration   (-), North</span>
<span class="go">   rn_ati_ini_s     =   0.9           !        &quot;            &quot;             South</span>
<span class="go">   rn_smi_ini_n     =   6.3           !  initial ice salinity     (g/kg), North</span>
<span class="go">   rn_smi_ini_s     =   6.3           !        &quot;            &quot;             South</span>
<span class="go">   rn_tmi_ini_n     = 270.            !  initial ice temperature     (K), North</span>
<span class="go">   rn_tmi_ini_s     = 270.            !        &quot;            &quot;             South</span>
<span class="go">   rn_tsu_ini_n     = 270.            !  initial surface temperature (K), North</span>
<span class="go">   rn_tsu_ini_s     = 270.            !        &quot;            &quot;             South</span>
<span class="go">   rn_tms_ini_n     = 270.            !  initial snw temperature     (K), North</span>
<span class="go">   rn_tms_ini_s     = 270.            !        &quot;            &quot;             South</span>
<span class="go">   rn_apd_ini_n     =   0.2           !  initial pond fraction       (-), North</span>
<span class="go">   rn_apd_ini_s     =   0.2           !        &quot;            &quot;             South</span>
<span class="go">   rn_hpd_ini_n     =   0.05          !  initial pond depth          (m), North</span>
<span class="go">   rn_hpd_ini_s     =   0.05          !        &quot;            &quot;             South</span>
<span class="go">   rn_hld_ini_n     =   0.0           !  initial pond lid depth      (m), North</span>
<span class="go">   rn_hld_ini_s     =   0.0           !        &quot;            &quot;             South</span>
<span class="go">   ! -- for nn_iceini_file = 1</span>
<span class="go">   sn_hti = &#39;Ice_initialization&#39;    , -12 ,&#39;hti&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_hts = &#39;Ice_initialization&#39;    , -12 ,&#39;hts&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_ati = &#39;Ice_initialization&#39;    , -12 ,&#39;ati&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_smi = &#39;Ice_initialization&#39;    , -12 ,&#39;smi&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_tmi = &#39;Ice_initialization&#39;    , -12 ,&#39;tmi&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_tsu = &#39;Ice_initialization&#39;    , -12 ,&#39;tsu&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_tms = &#39;NOT USED&#39;              , -12 ,&#39;tms&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   !      melt ponds (be careful, sn_apd is the pond concentration (not fraction), so it differs from rn_apd)</span>
<span class="go">   sn_apd = &#39;NOT USED&#39;              , -12 ,&#39;apd&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_hpd = &#39;NOT USED&#39;              , -12 ,&#39;hpd&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   sn_hld = &#39;NOT USED&#39;              , -12 ,&#39;hld&#39;   ,  .false.  , .true., &#39;yearly&#39;  , &#39;&#39; , &#39;&#39;, &#39;&#39;</span>
<span class="go">   cn_dir=&#39;./&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namalb">
<h5><a class="toc-backref" href="#id53">namalb</a><a class="headerlink" href="#namalb" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>default values</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!------------------------------------------------------------------------------</span>
<span class="go">&amp;namalb         !   albedo parameters</span>
<span class="go">!------------------------------------------------------------------------------</span>
<span class="go">   !                                  !                          !  obs range (cloud-sky)</span>
<span class="go">   rn_alb_sdry      =   0.85          !  dry snow albedo         :  0.85 -- 0.87</span>
<span class="go">   rn_alb_smlt      =   0.75          !  melting snow albedo     :  0.72 -- 0.82</span>
<span class="go">   rn_alb_idry      =   0.60          !  dry ice albedo          :  0.54 -- 0.65</span>
<span class="go">   rn_alb_imlt      =   0.50          !  bare puddled ice albedo :  0.49 -- 0.58</span>
<span class="go">   rn_alb_dpnd      =   0.27          !  ponded ice albedo       :  0.10 -- 0.30</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="input-files">
<h3><a class="toc-backref" href="#id54">Input files</a><a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h3>
<div class="section" id="domain-cfg">
<h4><a class="toc-backref" href="#id55">domain_cfg</a><a class="headerlink" href="#domain-cfg" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-l121-domain-cfg-b0-2-c3-0-d1-0"><span class="std std-ref">eORCA025.L121_domain_cfg_b0.2_c3.0_d1.0.nc</span></a></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="atmospheric-forcing">
<h4><a class="toc-backref" href="#id56">atmospheric forcing</a><a class="headerlink" href="#atmospheric-forcing" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_DATA.html#jra55-v1-4"><span class="std std-ref">drowned_*_JRA55_y????.nc</span></a></p></li>
<li><p>weights: eORCA025_JRA55_do_c3.0_weights_bicubic.nc and eORCA025_JRA55_do_c3.0_weights_bilin.nc</p></li>
<li><p>variable: uas, vas (wind), rsds, rlds (radiations), tas, huss (temp. and specific umidity),
tprecip, prsn (total precip and snow), psl (surface pressure)</p></li>
<li><p>frequency: 3h</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="runoff">
<h4><a class="toc-backref" href="#id57">runoff</a><a class="headerlink" href="#runoff" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-runoff-b0-2-v0-0"><span class="std std-ref">eORCA025_runoff_b0.2_v0.0.nc</span></a></p></li>
<li><p>variables: sorunoff and socoefr</p></li>
<li><p>frequency: monthly and no time dimension</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="iceberg-calving">
<h4><a class="toc-backref" href="#id58">iceberg calving</a><a class="headerlink" href="#iceberg-calving" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-calving-b0-2-v2-3"><span class="std std-ref">eORCA025_calving_b0.2_v2.nc</span></a></p></li>
<li><p>variable: soicbclv</p></li>
<li><p>frequency: annual</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="top-tidal-velocity">
<h4><a class="toc-backref" href="#id59">top tidal velocity</a><a class="headerlink" href="#top-tidal-velocity" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-ttv-b0-2-v0-0"><span class="std std-ref">eORCA025_ttv_b0.2_v0.0.nc</span></a></p></li>
<li><p>variable: ttv</p></li>
<li><p>frequency: annual</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="geothermal-heat-flux">
<h4><a class="toc-backref" href="#id60">geothermal heat flux</a><a class="headerlink" href="#geothermal-heat-flux" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA12.html#ghflux-v2-0"><span class="std std-ref">ghflux_v2.0.nc</span></a></p></li>
<li><p>variable: gh_flux</p></li>
<li><p>frequency: annual</p></li>
<li><p>weights: eORCA025_ghflux_v2.0_c3.0_weights_bilin.nc</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="internal-wave-mixing">
<h4><a class="toc-backref" href="#id61">internal wave mixing</a><a class="headerlink" href="#internal-wave-mixing" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-iwm-b0-2-v0-0"><span class="std std-ref">eORCA025_iwm_b0.2_v0.0.nc</span></a></p></li>
<li><p>variables: mixing_power_bot, mixing_power_pyc, mixing_power_cri and decay_scale_cri, decay_scale_bot</p></li>
<li><p>frequency: annual</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="chlorophyl">
<h4><a class="toc-backref" href="#id62">chlorophyl</a><a class="headerlink" href="#chlorophyl" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#chlorophyl-v0-0"><span class="std std-ref">chlorophyl_v0.0.nc</span></a></p></li>
<li><p>variable: CHLA</p></li>
<li><p>frequency: monthly</p></li>
<li><p>weights: eORCA025_chlorophyl_v0.0_c3.0_weights_bilin.nc</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="intial-condition">
<h4><a class="toc-backref" href="#id63">intial condition</a><a class="headerlink" href="#intial-condition" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-l121-woa2018-b0-2-c3-0-d1-0-v19812010-4"><span class="std std-ref">eORCA025.L121_WOA2018_b0.2_c3.0_d1.0_v19812010.4.nc</span></a></p></li>
<li><p>variables: votemper, vosaline</p></li>
<li><p>frequency: monthly</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="sea-surface-salinity">
<h4><a class="toc-backref" href="#id64">sea surface salinity</a><a class="headerlink" href="#sea-surface-salinity" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: sss_WOA2018r04_v19812010.1.nc</p></li>
<li><p>variable: sosaline</p></li>
<li><p>frequency: monthly</p></li>
<li><p>weights: eORCA025_sss_WOA2018r04_v19812010_c3.0_weights_bilin.nc</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="distance-to-coast">
<h4><a class="toc-backref" href="#id65">distance to coast</a><a class="headerlink" href="#distance-to-coast" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-distcoast-b0-2-v0-0"><span class="std std-ref">eORCA025_distcoast_b0.2_v0.0.nc</span></a></p></li>
<li><p>variable: Tcoast</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="slip-condition">
<h4><a class="toc-backref" href="#id66">slip condition</a><a class="headerlink" href="#slip-condition" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-shlat2d-v0-0"><span class="std std-ref">eORCA025_shlat2d_v0.0.nc</span></a></p></li>
<li><p>variable: shlat2d</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="enhance-bottom-friction">
<h4><a class="toc-backref" href="#id67">enhance bottom friction</a><a class="headerlink" href="#enhance-bottom-friction" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>filename: <a class="reference internal" href="input_eORCA025.html#eorca025-bfr2d-v0-0"><span class="std std-ref">eORCA025_bfr2d_v0.0.nc</span></a></p></li>
<li><p>variable: bfr_coef</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="indonesian-through-flow">
<h4><a class="toc-backref" href="#id68">Indonesian Through Flow</a><a class="headerlink" href="#indonesian-through-flow" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>finename: <a class="reference internal" href="input_eORCA025.html#eorca025-mskitf-v1-0"><span class="std std-ref">eORCA025_mskitf_v1.0.nc</span></a></p></li>
<li><p>variable: tmaskitf</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="code">
<h3><a class="toc-backref" href="#id69">Code</a><a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h3>
<div class="section" id="xios">
<h4><a class="toc-backref" href="#id70">XIOS</a><a class="headerlink" href="#xios" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="compilation">
<h4><a class="toc-backref" href="#id71">Compilation</a><a class="headerlink" href="#compilation" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>XIOS:
- xios-2.5_r1903</p></li>
<li><p>Module loaded:
- intel/17.0
- intelmpi/2017.0.098
- hdf5/1.8.17
- netcdf/4.4.0_fortran-4.4.2</p></li>
<li><p>comments on this choice:
- Netcdf is not available on Occigen with the latest intel compiler (2019.4.243)
- Mondher explained me than the netcdf 4.6.3-intel-19.0.4-intelmpi-2019.4.243</p>
<blockquote>
<div><p>compiled for fortran has some bugs for some application and has been removed.</p>
</div></blockquote>
<ul class="simple">
<li><p>Based on this comments, I decided it was not a safe choice to use the latest compiler
and to recompile netcdf 4.6.3-intel-19.0.4-intelmpi-2019.4.243 for fortran</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="base">
<h4><a class="toc-backref" href="#id72">base</a><a class="headerlink" href="#base" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The latest stable version available has been choosen: NEMO4.0.3.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">svn co -r 13358  https://forge.ipsl.jussieu.fr/nemo/svn/NEMO/releases/r4.0/r4.0.3 NEMO4</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id4">
<h4><a class="reference external" href="https://github.com/pmathiot/DCM/tree/DCM_4.0.3_TIPPACS/DCMTOOLS/DRAKKAR">drakkar layer</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>2d slip condition.</p></li>
<li><p>some renaming of restart namelist.</p></li>
<li><p>Lionel renaud relative wind parametrised.</p></li>
<li><p>use of distance to coast in sss restoring.</p></li>
<li><p>smoothing of sss before computing sss restoring.</p></li>
<li><p>add possibility to specify some file name in the namelist.</p></li>
<li><p>add possibility to specify iwm file name in the namelist (variables as well)</p></li>
</ul>
</div>
<div class="section" id="iceberg-changes">
<h4><a class="toc-backref" href="#id74">iceberg changes</a><a class="headerlink" href="#iceberg-changes" title="Permalink to this headline">¶</a></h4>
<p>On top of this Merino work has been included. A branch based on NEMO trunk has been developed for futur inclusion into the trunk.
The corresponding NEMO tickets are <a class="reference external" href="https://forge.ipsl.jussieu.fr/nemo/ticket/2494">#2494</a>,
<a class="reference external" href="https://forge.ipsl.jussieu.fr/nemo/ticket/2375">#2375</a> and <a class="reference external" href="https://forge.ipsl.jussieu.fr/nemo/ticket/1900">#1900</a>.
Tickets #2494 and #2375 are the first step before proper inclusion of M2016 work.
It consist mostly on simplifications, avoid useless interpolation and lbclnk. #1900 is the inclusion of M2016.
In addition but not activated in this simulation, change in the grounded module has been done in oder the check if the iceberg tail hit the ground or not.
The merge is done by cherry picking and the conflic are fixed by hand (no major difficulties).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">svn merge --allow-mixed-revisions -r 13243:13276 https://forge.ipsl.jussieu.fr/nemo/svn/NEMO/branches/2020/tickets_2494_2375</span>
<span class="go">svn merge --allow-mixed-revisions -r 13277:13374 https://forge.ipsl.jussieu.fr/nemo/svn/NEMO/branches/2020/tickets_icb_1900</span>
</pre></div>
</div>
</div>
<div class="section" id="ice-shelf-changes">
<h4><a class="toc-backref" href="#id75">ice shelf changes</a><a class="headerlink" href="#ice-shelf-changes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>2019 trunk development (ie possibilities to run open cavities and parametrisation and new ice sheet coupling method):
The phasing work between trunk and NEMO4 has already been done in the branch NEMO_4.0.2_GO8_package_ENHANCE-02_ISF_nemo.
In order to avoid picking METO only changes, as for the icb work, the cherry picking methode has been choosen for the merge.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">svn merge -r 12715:12927 https://forge.ipsl.jussieu.fr/nemo/svn/NEMO/branches/UKMO/NEMO_4.0.2_GO8_package_ENHANCE-02_ISF_nemo</span>
</pre></div>
</div>
</li>
<li><p>background tidal velocity from 2d map:
As show in Jourdain et al. (2018), the prescription of 2d tidal velocity compare quite well with model solution using full tide model.
I order to avoid trouble with tide at 0.25 degres resolution in a global configuration, this solution has been implemented.
The modifications affect zdfdrg (reading and computation of top drag) and isfcav_gam (computation of gammat).
The modifications wrt reference (ie base + icb merge + isf merge) are available <a class="reference external" href="https://github.com/pmathiot/DCM/commit/866efb8b9a974f6b6c0948b3b8dba88484e24634">here</a>.
This has been added in the DRAKKAR layer.</p></li>
</ul>
</div>
</div>
<div class="section" id="outputs">
<h3><a class="toc-backref" href="#id76">Outputs</a><a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="generalities">
<h4><a class="toc-backref" href="#id77">Generalities</a><a class="headerlink" href="#generalities" title="Permalink to this headline">¶</a></h4>
<ul>
<li><dl>
<dt>multiple files:</dt><dd><ul class="simple">
<li><p>rebuild in post processing</p></li>
<li><p>compression and chunking during rebuild stage</p></li>
<li><p>here is only presented the 5d output, but 1m and 1y output are also saved at run time.</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;file_definition</span> <span class="na">type=</span><span class="s">&quot;multiple_file&quot;</span> <span class="na">name=</span><span class="s">&quot;&lt;OUTDIR&gt;/@expname@_@freq@&quot;</span> <span class="na">sync_freq=</span><span class="s">&quot;5d&quot;</span> <span class="na">min_digits=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>frequency:</dt><dd><ul class="simple">
<li><p>5d, 1mo and 1y (same outputs whatever is the frequency)</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;file_group</span> <span class="na">id=</span><span class="s">&quot;5d&quot;</span> <span class="na">output_freq=</span><span class="s">&quot;5d&quot;</span>  <span class="na">split_freq=</span><span class="s">&quot;5d&quot;</span>  <span class="na">output_level=</span><span class="s">&quot;10&quot;</span> <span class="na">enabled=</span><span class="s">&quot;.TRUE.&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- 1d files --&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>file attributs:</dt><dd><ul class="simple">
<li><p><em>start_date, output_frequency, CONFIG, CASE</em> are added for each files.</p></li>
<li><p><em>EOS</em> is added only for the relevant files.</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">&quot;start_date&quot;</span>       <span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="nt">&gt;&lt;NDATE0&gt;</span>    <span class="nt">&lt;/variable&gt;</span>
<span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">&quot;output_frequency&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>5d       <span class="nt">&lt;/variable&gt;</span>
<span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">&quot;CONFIG&quot;</span>           <span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;&lt;CONFIG&gt;</span> <span class="nt">&lt;/variable&gt;</span>
<span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">&quot;CASE&quot;</span>             <span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;&lt;CASE&gt;</span>   <span class="nt">&lt;/variable&gt;</span>
<span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">&quot;EOS&quot;</span>              <span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span> TEOS10  <span class="nt">&lt;/variable&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="ocean">
<h4><a class="toc-backref" href="#id78">Ocean</a><a class="headerlink" href="#ocean" title="Permalink to this headline">¶</a></h4>
<ul>
<li><dl>
<dt>grid T file:</dt><dd><ul class="simple">
<li><p>e3t</p></li>
<li><p>3d thickness weighted temperature <em>(votemper)</em></p></li>
<li><p>3d thickness weighted salinity <em>(vosaline)</em></p></li>
<li><p>bottom T and bottom S <em>(sosbt and sosbs)</em></p></li>
<li><p>sea surface T and sea surface S <em>(sosst and sosss)</em></p></li>
<li><p>sea surface height <em>(sossh)</em></p></li>
<li><p>mixed layer depth with one criterium on denisty (0.01) and on kz <em>(somxl010 and somixhgt)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- T FILES --&gt;</span>
<span class="nt">&lt;file</span> <span class="na">id=</span><span class="s">&quot;file1&quot;</span> <span class="na">name_suffix=</span><span class="s">&quot;_gridT_&quot;</span> <span class="na">description=</span><span class="s">&quot;ocean T grid variables&quot;</span> <span class="nt">&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;e3t&quot;</span> <span class="na">long_name=</span><span class="s">&quot;T-cell thickness&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;toce&quot;</span>         <span class="na">name=</span><span class="s">&quot;votemper&quot;</span> <span class="na">operation=</span><span class="s">&quot;average&quot;</span> <span class="na">freq_op=</span><span class="s">&quot;5d&quot;</span> <span class="na">cell_methods=</span><span class="s">&quot;time: mean (thickness weighted)&quot;</span> <span class="nt">&gt;</span>  @toce_e3t / @e3t  <span class="nt">&lt;/field&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;soce&quot;</span>         <span class="na">name=</span><span class="s">&quot;vosaline&quot;</span> <span class="na">operation=</span><span class="s">&quot;average&quot;</span> <span class="na">freq_op=</span><span class="s">&quot;5d&quot;</span> <span class="na">cell_methods=</span><span class="s">&quot;time: mean (thickness weighted)&quot;</span> <span class="nt">&gt;</span>  @soce_e3t / @e3t  <span class="nt">&lt;/field&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;sbt&quot;</span>          <span class="na">name=</span><span class="s">&quot;sosbt&quot;</span>     <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;sbs&quot;</span>          <span class="na">name=</span><span class="s">&quot;sosbs&quot;</span>     <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;sst&quot;</span>          <span class="na">name=</span><span class="s">&quot;sosst&quot;</span>     <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;sss&quot;</span>          <span class="na">name=</span><span class="s">&quot;sosss&quot;</span>     <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;ssh&quot;</span>          <span class="na">name=</span><span class="s">&quot;sossh&quot;</span>     <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;mldr10_1&quot;</span>     <span class="na">name=</span><span class="s">&quot;somxl010&quot;</span>  <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;mldkz5&quot;</span>       <span class="na">name=</span><span class="s">&quot;somixhgt&quot;</span>  <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>grid U and grid V files:</dt><dd><ul class="simple">
<li><p>e3u and e3v</p></li>
<li><p>ocean zonal and meridional thickness weighted velocity <em>(vozocrtx and vomecrty)</em></p></li>
<li><p>zonal and meridional surface stress <em>(sozotaux and sometauy)</em></p></li>
<li><p>sea surface zonal and meridional velocity <em>(ssu and ssv)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- U FILES --&gt;</span>
<span class="nt">&lt;file</span> <span class="na">id=</span><span class="s">&quot;file2&quot;</span> <span class="na">name_suffix=</span><span class="s">&quot;_gridU_&quot;</span> <span class="na">description=</span><span class="s">&quot;ocean U grid variables&quot;</span> <span class="nt">&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;e3u&quot;</span> <span class="na">long_name=</span><span class="s">&quot;U-cell thickness&quot;</span>  <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;uoce&quot;</span>        <span class="na">name=</span><span class="s">&quot;vozocrtx&quot;</span> <span class="na">operation=</span><span class="s">&quot;average&quot;</span> <span class="na">freq_op=</span><span class="s">&quot;5d&quot;</span> <span class="na">cell_methods=</span><span class="s">&quot;time: mean (thickness weighted)&quot;</span> <span class="nt">&gt;</span>   @uoce_e3u / @e3u  <span class="nt">&lt;/field&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;utau&quot;</span>        <span class="na">name=</span><span class="s">&quot;sozotaux&quot;</span>  <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;ssu&quot;</span>         <span class="na">name=</span><span class="s">&quot;sozocrtx&quot;</span>  <span class="nt">/&gt;</span>

<span class="c">&lt;!-- V FILES --&gt;</span>
<span class="nt">&lt;file</span> <span class="na">id=</span><span class="s">&quot;file3&quot;</span> <span class="na">name_suffix=</span><span class="s">&quot;_gridV_&quot;</span> <span class="na">description=</span><span class="s">&quot;ocean V grid variables&quot;</span> <span class="nt">&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;e3v&quot;</span> <span class="na">long_name=</span><span class="s">&quot;V-cell thickness&quot;</span>  <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;voce&quot;</span>         <span class="na">name=</span><span class="s">&quot;vomecrty&quot;</span> <span class="na">operation=</span><span class="s">&quot;average&quot;</span> <span class="na">freq_op=</span><span class="s">&quot;5d&quot;</span> <span class="na">cell_methods=</span><span class="s">&quot;time: mean (thickness weighted)&quot;</span> <span class="nt">&gt;</span>  @voce_e3v / @e3v <span class="nt">&lt;/field&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vtau&quot;</span>         <span class="na">name=</span><span class="s">&quot;sometauy&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;ssv&quot;</span>          <span class="na">name=</span><span class="s">&quot;somecrty&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>grid W file:</dt><dd><ul class="simple">
<li><p>vertical velocity <em>(vovecrtz)</em></p></li>
<li><p>kz <em>(voavt)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- W FILES --&gt;</span>
<span class="nt">&lt;file</span> <span class="na">id=</span><span class="s">&quot;file4&quot;</span> <span class="na">name_suffix=</span><span class="s">&quot;_gridW_&quot;</span> <span class="na">description=</span><span class="s">&quot;ocean W grid variables&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;woce&quot;</span>         <span class="na">name=</span><span class="s">&quot;vovecrtz&quot;</span>    <span class="nt">/&gt;</span>
  <span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;avt&quot;</span>          <span class="na">name=</span><span class="s">&quot;voavt&quot;</span>       <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>flxT file:</dt><dd><ul>
<li><dl>
<dt>heat fluxes:</dt><dd><ul class="simple">
<li><p>total heat fluxes (qt)</p></li>
<li><p>solar heat flux (soshfldo)</p></li>
<li><p>non solar heat flux (qns)</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- FLXT FILES --&gt;</span>
<span class="nt">&lt;file</span> <span class="na">id=</span><span class="s">&quot;file5&quot;</span> <span class="na">name_suffix=</span><span class="s">&quot;_flxT_&quot;</span> <span class="na">description=</span><span class="s">&quot;ocean T grid variables&quot;</span> <span class="nt">&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qt&quot;</span>           <span class="na">name=</span><span class="s">&quot;sohefldo&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qsr&quot;</span>          <span class="na">name=</span><span class="s">&quot;soshfldo&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qns_oce&quot;</span>      <span class="na">name=</span><span class="s">&quot;qns_oce&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qns&quot;</span>          <span class="na">name=</span><span class="s">&quot;qns&quot;</span>       <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qla_oce&quot;</span>      <span class="na">name=</span><span class="s">&quot;solhflup&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qlw_oce&quot;</span>      <span class="na">name=</span><span class="s">&quot;solwfldo&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qsb_oce&quot;</span>      <span class="na">name=</span><span class="s">&quot;sosbhfup&quot;</span>  <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>atmospheric fwf:</dt><dd><ul class="simple">
<li><p>evaporation - precip - runoff <em>(sowaflup)</em></p></li>
<li><p>restoring flux <em>(sowafld)</em></p></li>
<li><p>precip <em>(sowapre)</em></p></li>
<li><p>wind speed <em>(sowinsp)</em></p></li>
<li><p>river runoffs (greenland included) <em>(sornf)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;empmr&quot;</span>        <span class="na">name=</span><span class="s">&quot;sowaflup&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;saltflx&quot;</span>      <span class="na">name=</span><span class="s">&quot;sosfldow&quot;</span>  <span class="nt">/&gt;</span>    <span class="c">&lt;!-- check in the code the &#39;old drakkar name&#39; --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;erp&quot;</span>          <span class="na">name=</span><span class="s">&quot;sowafld&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;precip&quot;</span>       <span class="na">name=</span><span class="s">&quot;sowapre&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;wspd&quot;</span>         <span class="na">name=</span><span class="s">&quot;sowinsp&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;runoffs&quot;</span>      <span class="na">name=</span><span class="s">&quot;sornf&quot;</span>     <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>icebergs:</dt><dd><ul class="simple">
<li><p>total iceberg melt                <em>(berg_melt)</em></p></li>
<li><p>lateral convective melt           <em>(berg_conv_melt)</em></p></li>
<li><p>wave erosion melt                 <em>(berg_eros_melt)</em></p></li>
<li><p>basal bouyant melt                <em>(berg_buoy_melt)</em></p></li>
<li><p>total latent heat flux            <em>(berg_qlat)</em></p></li>
<li><p>total heat content flux           <em>(berg_hcflx)</em></p></li>
<li><p>iceberg virtual area in each cell <em>(berg_varea)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- ICB --&gt;</span>
<span class="c">&lt;!-- iceberg melt --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;berg_melt&quot;</span>      <span class="na">name=</span><span class="s">&quot;berg_melt&quot;</span>      <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;berg_buoy_melt&quot;</span> <span class="na">name=</span><span class="s">&quot;berg_buoy_melt&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;berg_eros_melt&quot;</span> <span class="na">name=</span><span class="s">&quot;berg_eros_melt&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;berg_conv_melt&quot;</span> <span class="na">name=</span><span class="s">&quot;berg_conv_melt&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- iceberg heat flux --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span> <span class="s">&quot;berg_melt_hcflx&quot;</span> <span class="na">name=</span><span class="s">&quot;berg_hcflx&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span> <span class="s">&quot;berg_melt_qlat&quot;</span>  <span class="na">name=</span><span class="s">&quot;berg_qlat&quot;</span>    <span class="nt">/&gt;</span>

<span class="c">&lt;!-- iceberg misc. --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span> <span class="s">&quot;berg_virtual_area&quot;</span> <span class="na">name=</span><span class="s">&quot;berg_varea&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>ice shelf:</dt><dd><ul class="simple">
<li><p>thermal and saline exchange coeficient <em>(sogammat_cav and sogammas_cav)</em></p></li>
<li><p>squared thermal exchange coeficient <em>(sogammat2_cav)</em></p></li>
<li><p>thermal driving <em>(thermald_cav)</em></p></li>
<li><p>top boundary layer (Losch 2008 sense) properties <em>(ttbl_cav, stbl_cav, utbl_cav, vtbl_cav, ustar_cav)</em></p></li>
<li><p>melt rate <em>(sowflisf_cav)</em></p></li>
<li><p>heat fluxes (total, latent, conductive, heat content) <em>(qoceisf_cav, qlatisf_cav, qhcisf_cav, qhcond_cav)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- ISF --&gt;</span>
<span class="c">&lt;!-- ice shelf exchange coef --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isfgammat&quot;</span>    <span class="na">name=</span><span class="s">&quot;sogammat2_cav&quot;</span> <span class="nt">&gt;</span>   isfgammat*isfgammat  <span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isfgammat&quot;</span>    <span class="na">name=</span><span class="s">&quot;sogammat_cav&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isfgammas&quot;</span>    <span class="na">name=</span><span class="s">&quot;sogammas_cav&quot;</span>  <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ice shelf tbl properties --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isfthermald_cav&quot;</span> <span class="na">name=</span><span class="s">&quot;thermald_cav&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;ttbl_cav&quot;</span>        <span class="na">name=</span><span class="s">&quot;ttbl_cav&quot;</span>     <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;stbl&quot;</span>            <span class="na">name=</span><span class="s">&quot;stbl_cav&quot;</span>     <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;utbl&quot;</span>            <span class="na">name=</span><span class="s">&quot;utbl_cav&quot;</span>     <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vtbl&quot;</span>            <span class="na">name=</span><span class="s">&quot;vtbl_cav&quot;</span>     <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isfustar&quot;</span>        <span class="na">name=</span><span class="s">&quot;ustar_cav&quot;</span>    <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ice shelf melt --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;fwfisf_cav&quot;</span>      <span class="na">name=</span><span class="s">&quot;sowflisf_cav&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ice shelf heat fluxes --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qoceisf_cav&quot;</span>     <span class="na">name=</span><span class="s">&quot;qoceisf_cav&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qlatisf_cav&quot;</span>     <span class="na">name=</span><span class="s">&quot;qlatisf_cav&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qhcisf_cav&quot;</span>      <span class="na">name=</span><span class="s">&quot;qhcisf_cav&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qconisf&quot;</span>         <span class="na">name=</span><span class="s">&quot;qhcond_cav&quot;</span>   <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="ice">
<h4><a class="toc-backref" href="#id79">Ice</a><a class="headerlink" href="#ice" title="Permalink to this headline">¶</a></h4>
<ul>
<li><dl>
<dt>mask variables:</dt><dd><ul class="simple">
<li><p>treshold (&gt;0) <em>(simsk)</em></p></li>
<li><p>treshold 0.05 <em>(simsk05)</em></p></li>
<li><p>treshold 0.15 <em>(simsk15)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- ice mask --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icemask&quot;</span>          <span class="na">name=</span><span class="s">&quot;simsk&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icemask05&quot;</span>        <span class="na">name=</span><span class="s">&quot;simsk05&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icemask15&quot;</span>        <span class="na">name=</span><span class="s">&quot;simsk15&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>general variables:</dt><dd><ul class="simple">
<li><p>ice and snow volume <em>(sivolu and snvolu)</em></p></li>
<li><p>ice thickness and ice concentration <em>(sithic and snthic)</em></p></li>
<li><p>ice concentration <em>(siconc)</em></p></li>
<li><p>ice salinity <em>(sisali)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- general --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;snwvolu&quot;</span>          <span class="na">name=</span><span class="s">&quot;snvolu&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;snwthic&quot;</span>          <span class="na">name=</span><span class="s">&quot;snthic&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icethic&quot;</span>          <span class="na">name=</span><span class="s">&quot;sithic&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icevolu&quot;</span>          <span class="na">name=</span><span class="s">&quot;sivolu&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;iceconc&quot;</span>          <span class="na">name=</span><span class="s">&quot;siconc&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icesalt&quot;</span>          <span class="na">name=</span><span class="s">&quot;sisali&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>heat variables:</dt><dd><ul class="simple">
<li><p>mean ice and snow temperature <em>(sitemp and sntemp)</em></p></li>
<li><p>sea ice surface and bottom temperature <em>(sittop and sitbot)</em></p></li>
<li><p>snow/ice interface temperature <em>(sitsni)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- heat --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icetemp&quot;</span>          <span class="na">name=</span><span class="s">&quot;sitemp&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;snwtemp&quot;</span>          <span class="na">name=</span><span class="s">&quot;sntemp&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icettop&quot;</span>          <span class="na">name=</span><span class="s">&quot;sittop&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icetbot&quot;</span>          <span class="na">name=</span><span class="s">&quot;sitbot&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icetsni&quot;</span>          <span class="na">name=</span><span class="s">&quot;sitsni&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>momentum variables:</dt><dd><ul class="simple">
<li><p>ice velocities <em>(sivelu, sivelv, sivelo)</em></p></li>
<li><p>atm/ice stresses <em>(utau_ai, vtau_ai)</em></p></li>
<li><p>ocean/ice stresses <em>(utau_oi, vtau_oi)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- momentum --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;uice&quot;</span>             <span class="na">name=</span><span class="s">&quot;sivelu&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vice&quot;</span>             <span class="na">name=</span><span class="s">&quot;sivelv&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icevel&quot;</span>           <span class="na">name=</span><span class="s">&quot;sivelo&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;utau_ai&quot;</span>          <span class="na">name=</span><span class="s">&quot;utau_ai&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vtau_ai&quot;</span>          <span class="na">name=</span><span class="s">&quot;vtau_ai&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;utau_oi&quot;</span>          <span class="na">name=</span><span class="s">&quot;utau_oi&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vtau_oi&quot;</span>          <span class="na">name=</span><span class="s">&quot;vtau_oi&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>reheology variables:</dt><dd><ul class="simple">
<li><p>ice divergence, shear and stress <em>(sidive, sishea, sistre)</em></p></li>
<li><p>average normal stress and max shear stress <em>(normstr, sheastr)</em></p></li>
<li><p>1st and 2nd principal stress component and convergence metric <em>(isgig1, isig2, isig3)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- rheology --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icediv&quot;</span>           <span class="na">name=</span><span class="s">&quot;sidive&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;iceshe&quot;</span>           <span class="na">name=</span><span class="s">&quot;sishea&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icestr&quot;</span>           <span class="na">name=</span><span class="s">&quot;sistre&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;normstr&quot;</span>          <span class="na">name=</span><span class="s">&quot;normstr&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;sheastr&quot;</span>          <span class="na">name=</span><span class="s">&quot;sheastr&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isig1&quot;</span>            <span class="na">name=</span><span class="s">&quot;isig1&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isig2&quot;</span>            <span class="na">name=</span><span class="s">&quot;isig2&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;isig3&quot;</span>            <span class="na">name=</span><span class="s">&quot;isig3&quot;</span>   <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>heat fluxes variables</dt><dd><ul class="simple">
<li><p>total heat flux received by the ocean (ie ocean/atm interface + ocean/ice intercafe) <em>(qt_oce_ai)</em></p></li>
<li><p>total heat flux received at the ocean/atm interface + ice/atm interface <em>(qt_atm_oi)</em></p></li>
<li><p>solar heat flux transmitted through the ice (to the ocean) <em>(qtr_ice_bot)</em></p></li>
<li><p>Net sensible / conductive heat flux under sea ice <em>(hfxsensib, hfxcndbot)</em></p></li>
<li><p>ice-ocean / snow-ocean mass flux from ice / snow melt/growth <em>(vfxice, sfxsnw)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- heat fluxes --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qt_oce_ai&quot;</span>        <span class="na">name=</span><span class="s">&quot;qt_oce_ai&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qt_atm_oi&quot;</span>        <span class="na">name=</span><span class="s">&quot;qt_atm_oi&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;qtr_ice_bot&quot;</span>      <span class="na">name=</span><span class="s">&quot;qtr_ice_bot&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;hfxcndbot&quot;</span>        <span class="na">name=</span><span class="s">&quot;hfxcndbot&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;hfxsensib&quot;</span>        <span class="na">name=</span><span class="s">&quot;hfxsensib&quot;</span>  <span class="nt">/&gt;</span>

<span class="c">&lt;!-- mass fluxes --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vfxice&quot;</span>           <span class="na">name=</span><span class="s">&quot;vfxice&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;vfxsnw&quot;</span>           <span class="na">name=</span><span class="s">&quot;vfxsnw&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>variables by categories:</dt><dd><ul class="simple">
<li><p>sea ice mask <em>(simskcat)</em></p></li>
<li><p>ice and snow thickness <em>(sithicat and snthicat)</em></p></li>
<li><p>ice concentration <em>(siconcat)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- categories --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icemask_cat&quot;</span>      <span class="na">name=</span><span class="s">&quot;simskcat&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;snwthic_cat&quot;</span>      <span class="na">name=</span><span class="s">&quot;snthicat&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;iceconc_cat&quot;</span>      <span class="na">name=</span><span class="s">&quot;siconcat&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;icethic_cat&quot;</span>      <span class="na">name=</span><span class="s">&quot;sithicat&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>scalar variables by hemisphere:</dt><dd><ul class="simple">
<li><p>ice extent (SH and NH) <em>(siextents, siextentn)</em></p></li>
<li><p>ice area (SH and NH) <em>(siarean, siarean)</em></p></li>
<li><p>ice volume (SH and NH) <em>(sivols, sivoln)</em></p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- hemispheric data --&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;NH_iceextt&quot;</span>       <span class="na">name=</span><span class="s">&quot;siextentn&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;NH_icevolu&quot;</span>       <span class="na">name=</span><span class="s">&quot;sivoln&quot;</span>    <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;NH_icearea&quot;</span>       <span class="na">name=</span><span class="s">&quot;siarean&quot;</span>   <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;SH_iceextt&quot;</span>       <span class="na">name=</span><span class="s">&quot;siextents&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;SH_icevolu&quot;</span>       <span class="na">name=</span><span class="s">&quot;sivols&quot;</span>    <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">field_ref=</span><span class="s">&quot;SH_icearea&quot;</span>       <span class="na">name=</span><span class="s">&quot;siareas&quot;</span>   <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="performance">
<h3><a class="toc-backref" href="#id80">Performance</a><a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<div class="section" id="nemo-performance">
<h4><a class="toc-backref" href="#id81">NEMO Performance</a><a class="headerlink" href="#nemo-performance" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>module used:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Currently Loaded Modulefiles:</span>
<span class="go">  1) /DCM/4.0.3_TIPACCS           4) fortran/intel/.17.0          7) intel/17.0                  10) hdf5/1.8.17</span>
<span class="go">  2) c/intel/.17.0                5) mkl/17.0                     8) intelmpi/2017.0.098         11) netcdf/4.4.0_fortran-4.4.2</span>
<span class="go">  3) c++/intel/.17.0              6) idb/17.0                     9) szip/2.1                    12) /XIOS/2.5_r1903</span>
</pre></div>
</div>
<ul class="simple">
<li><p>compilation option used:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">%</span>FCFLAGS             -i4 -r8 -O3 -fp-model precise -xAVX -fno-alias -traceback
</pre></div>
</div>
<ul class="simple">
<li><p>This simulation is run on Occigen with Haswell node (24 cores per node).</p></li>
<li><p>The number of server used for this experiments is between 10 and 30 (UKMO is using 6 with success for GO6)
with at most one server per node. These XIOS servers are put in the first socket of each node using -m cyclic</p></li>
</ul>
<p>exemple of run command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">srun --mpi=pmi2  -m cyclic -K1 \</span>
<span class="go">    --cpu_bind=map_cpu:0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23\</span>
<span class="go">    --multi-prog  ./ztask_file.conf</span>
</pre></div>
</div>
<p>exemple of task file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">0-13   ./xios_server.exe</span>
<span class="go">14-1151   ./nemo4.exe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Here is the list of simulation (NNEMO_CORE NXIOS_CORE) with node fully loaded.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./run_nemo.scal.sh 230 10</span>
<span class="go">./run_nemo.scal.sh 460 20</span>
<span class="go">./run_nemo.scal.sh 690 30</span>
<span class="go">./run_nemo.scal.sh 920 16</span>
<span class="go">./run_nemo.scal.sh 1150 26</span>
<span class="go">./run_nemo.scal.sh 1380 12</span>
</pre></div>
</div>
<ul>
<li><p>All scalability run span over 5 days (320 time step), so files are only write during the last time step.</p>
<blockquote>
<div><ul class="simple">
<li><p>Performance are poor during the first 20 time steps (I don’t know why yet)</p></li>
<li><p>Every 3h, ie when new forcing are read, performance decrease slightly.
This effect is stronger with large number of cores.</p></li>
<li><p>Performance is weak for 690 and 920 cores in NEMO.
As I only run this test once, this not really significant.</p></li>
<li><p>1150 or 1380 offer a good compromise between performance and speed (more than 6 simulated years per day)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<img alt="_images/scal_eORCA025-OPM000.png" src="_images/scal_eORCA025-OPM000.png" />
</div>
<div class="section" id="selected-decomposition">
<h4><a class="toc-backref" href="#id82">Selected decomposition</a><a class="headerlink" href="#selected-decomposition" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>configuration 1150 NEMO cores with 26 XIOS servers (on 49 node) has these characteristics:</p>
<blockquote>
<div><ul class="simple">
<li><p>With this configuration, a domain is : 36  x 33</p></li>
<li><p>527 land subdomains</p></li>
<li><p>12 land processor are kept =&gt; waste of ressources.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>So final setup is 1138 ocean subdomains with 14 XIOS servers</strong></p>
<p>After a longer run, it appear the mean time step is larger.</p>
<img alt="_images/eORCA025.L121-OPM000_perf.png" src="_images/eORCA025.L121-OPM000_perf.png" />
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">stat over the last 10 days:</span>
<span class="go">  mean time step (s) (no outlyer)   : 0.630</span>
<span class="go">  std  time step (s) (no outlyer)   : 0.231</span>
<span class="go">  min  time step (s) (no outlyer)   : 0.575</span>
<span class="go">  max  time step (s) (no outlyer)   : 5.289</span>
<span class="go">  xios time step (s) (write output) : 5.807</span>
<span class="go">first time step (s): 34.182</span>
<span class="go">last  time step (s): 0.579</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mpp_init:</span>
<span class="go">~~~~~~~~</span>

<span class="go">   ==&gt; you use the best mpi decomposition</span>

<span class="go">  Number of mpi processes:  1138</span>
<span class="go">  Number of ocean subdomains =  1138</span>
<span class="go">  Number of suppressed land subdomains =   539</span>

<span class="go">  defines mpp subdomains</span>
<span class="go">     jpni =           43</span>
<span class="go">     jpnj =           39</span>
</pre></div>
</div>
<p>=&gt; one node less compared to the 1150/26 simulation with the same ocean domain.</p>
<p>=&gt; similar speed.</p>
</div>
<div class="section" id="xios-performance">
<h4><a class="toc-backref" href="#id83">XIOS performance</a><a class="headerlink" href="#xios-performance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>server:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">-&gt; report :  Memory report : Context &lt;nemo_server&gt; : server side : total memory used for buffer 2210100174 bytes</span>
<span class="go">-&gt; report : Performance report : Time spent for XIOS : 618.835</span>
<span class="go">-&gt; report : Performance report : Time spent in processing events : 44.4988</span>
<span class="go">-&gt; report : Performance report : Ratio : 7.19074%</span>
</pre></div>
</div>
<ul class="simple">
<li><p>client:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go"> -&gt; report :  Memory report : Context &lt;nemo&gt; : server side : total memory used for buffer 15005532 bytes</span>
<span class="go"> -&gt; report :  Performance report : Whole time from XIOS init and finalize: 618.655 s</span>
<span class="go"> -&gt; report :  Performance report : total time spent for XIOS : 42.028 s</span>
<span class="go"> -&gt; report :  Performance report : time spent for waiting free buffer : 2.02593 s</span>
<span class="go"> -&gt; report :  Performance report : Ratio : 0.327473 %</span>
<span class="go"> -&gt; report :  Performance report : This ratio must be close to zero. Otherwise it may be useful to increase buffer size or numbers of server</span>

<span class="go">* Extra cost for at each writing time step: 5s</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="cost">
<h4><a class="toc-backref" href="#id84">Cost</a><a class="headerlink" href="#cost" title="Permalink to this headline">¶</a></h4>
<div class="section" id="computer-time">
<h5><a class="toc-backref" href="#id85">Computer time</a><a class="headerlink" href="#computer-time" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>1 time step is 1350s and last 0.63.
So lets use 0.7s for 1 steps (pessimistic).</p></li>
<li><p>1 year is 365*86400/1350 = 23360 time step</p></li>
<li><p>Expected time for a year is at most : (23360 stps * 0.7 s + 5 s * (73 + 12 + 1)) / 3600 (s/h) = 4.66 h = 4h and 39 mins</p></li>
<li><p>Expected computer cost per simulated year is : 48 nodes * 24 core/node * 4.66 h = 5368 h / simulated years</p></li>
<li><p>Expected computer cost per simulation (60y) is : 5368 * 60 = 322099 h / simulation</p></li>
</ul>
<p><strong>So to sumarise, 1 simulation of 60 years is expected to cost : 325 000 h on occigen</strong></p>
</div>
<div class="section" id="data-output">
<h5><a class="toc-backref" href="#id86">Data output</a><a class="headerlink" href="#data-output" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>data (5d, monthly and yearly are the same):</p>
<ul>
<li><p>ocean = 2481M</p></li>
<li><p>ice   =   61M</p></li>
<li><p>total for 1 year (at 73 5d outputs + 12 monthly outputs + 1 yearly outputs) = 220G</p></li>
<li><p>total for 60 years = 13.2T</p></li>
</ul>
</li>
<li><p>restart:</p>
<ul>
<li><p>1 restart = 13G</p></li>
<li><p>total at 1 restart per years for 60 years: 780G</p></li>
</ul>
</li>
<li><p>overall:</p>
<ul>
<li><p>14Tb for one simulation</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="monitoring">
<h3><a class="toc-backref" href="#id87">Monitoring</a><a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="evaluation">
<h3><a class="toc-backref" href="#id88">Evaluation</a><a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tools_nemo.html" class="btn btn-neutral float-right" title="Useful tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="input_eORCA025.html" class="btn btn-neutral float-left" title="Input files for eORCA025 configurations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, DRAKKAR

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>